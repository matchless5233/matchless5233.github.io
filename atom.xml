<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Matchless</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://matchless5233.github.io/"/>
  <updated>2017-08-08T17:48:03.762Z</updated>
  <id>https://matchless5233.github.io/</id>
  
  <author>
    <name>Matchless</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>图解：MVC，MVP 和 MVVM</title>
    <link href="https://matchless5233.github.io/2017/08/09/%E5%9B%BE%E8%A7%A3%EF%BC%9AMVC%EF%BC%8CMVP-%E5%92%8C-MVVM/"/>
    <id>https://matchless5233.github.io/2017/08/09/图解：MVC，MVP-和-MVVM/</id>
    <published>2017-08-08T17:24:40.000Z</published>
    <updated>2017-08-08T17:48:03.762Z</updated>
    
    <content type="html"><![CDATA[<p>复杂的软件必须有清晰合理的架构，否则无法开发和维护。<br><a id="more"></a><br><a href="http://zh.wikipedia.org/wiki/MVC" target="_blank" rel="external">MVC</a>（Model-View-Controller）是最常见的软件架构之一，业界有着广泛应用。它本身<a href="http://www.ruanyifeng.com/blog/2007/11/mvc.html" target="_blank" rel="external">很容易理解</a>，但是要讲清楚，它与衍生的 MVP 和 MVVM 架构的区别就不容易了。</p>
<p>昨天晚上，我读了<a href="http://blog.nodejitsu.com/scaling-isomorphic-javascript-code/" target="_blank" rel="external">《Scaling Isomorphic Javascript Code》</a>，突然意识到，它们的区别非常简单。我用几段话，就可以说清。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/201324-cc059a8f9ceeeae1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>（题图：摄于瓦伦西亚，西班牙，2014年8月）</p>
<h3 id="一、MVC"><a href="#一、MVC" class="headerlink" title="一、MVC"></a>一、MVC</h3><p>MVC模式的意思是，软件可以分成三个部分。<br><img src="http://upload-images.jianshu.io/upload_images/201324-80de74672cc69eb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol>
<li>视图（View）：用户界面。</li>
<li>控制器（Controller）：业务逻辑</li>
<li>模型（Model）：数据保存</li>
</ol>
<p>各部分之间的通信方式如下。<br><img src="http://upload-images.jianshu.io/upload_images/201324-236669d95c494cf3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>View 传送指令到 Controller<br>Controller 完成业务逻辑后，要求 Model 改变状态<br>Model 将新的数据发送到 View，用户得到反馈</p>
<p>所有通信都是单向的。</p>
<h3 id="二、互动模式"><a href="#二、互动模式" class="headerlink" title="二、互动模式"></a>二、互动模式</h3><p>接受用户指令时，MVC 可以分成两种方式。一种是通过 View 接受指令，传递给 Controller。<br><img src="http://upload-images.jianshu.io/upload_images/201324-1e1ffe1184cdf07a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>另一种是直接通过controller接受指令。<br><img src="http://upload-images.jianshu.io/upload_images/201324-2d450c87297d7299.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="三、实例：Backbone"><a href="#三、实例：Backbone" class="headerlink" title="三、实例：Backbone"></a>三、实例：Backbone</h3><p>实际项目往往采用更灵活的方式，以 <a href="http://documentcloud.github.com/backbone" target="_blank" rel="external">Backbone.js</a> 为例。<br><img src="http://upload-images.jianshu.io/upload_images/201324-489c353b12296181.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol>
<li><p>用户可以向 View 发送指令（DOM 事件），再由 View 直接要求 Model 改变状态。</p>
</li>
<li><p>用户也可以直接向 Controller 发送指令（改变 URL 触发 hashChange 事件），再由 Controller 发送<br>给 View。</p>
</li>
<li><p>Controller 非常薄，只起到路由的作用，而 View 非常厚，业务逻辑都部署在 View。所以，Backbone 索性取消了 Controller，只保留一个 Router（路由器） 。</p>
</li>
</ol>
<h3 id="四、MVP"><a href="#四、MVP" class="headerlink" title="四、MVP"></a>四、MVP</h3><p>MVP 模式将 Controller 改名为 Presenter，同时改变了通信方向。<br><img src="http://upload-images.jianshu.io/upload_images/201324-ed8e57ad70594c4c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol>
<li><p>各部分之间的通信，都是双向的。</p>
</li>
<li><p>View 与 Model 不发生联系，都通过 Presenter 传递。</p>
</li>
<li><p>View 非常薄，不部署任何业务逻辑，称为”被动视图”（Passive View），即没有任何主动性，而 Presenter非常厚，所有逻辑都部署在那里。</p>
</li>
</ol>
<h3 id="五、MVVM"><a href="#五、MVVM" class="headerlink" title="五、MVVM"></a>五、MVVM</h3><p>MVVM 模式将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。<br><img src="http://upload-images.jianshu.io/upload_images/201324-b969ee4471c6bc49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。<a href="https://angularjs.org/" target="_blank" rel="external">Angular</a> 和 <a href="http://emberjs.com/" target="_blank" rel="external">Ember</a> 都采用这种模式。</p>
<p>（完）</p>
<p><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="external">文章来源：阮一峰老师的博客</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;复杂的软件必须有清晰合理的架构，否则无法开发和维护。&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="https://matchless5233.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="mvc" scheme="https://matchless5233.github.io/tags/mvc/"/>
    
      <category term="mvp" scheme="https://matchless5233.github.io/tags/mvp/"/>
    
      <category term="mvvm" scheme="https://matchless5233.github.io/tags/mvvm/"/>
    
  </entry>
  
  <entry>
    <title>穷忙的人生</title>
    <link href="https://matchless5233.github.io/2017/08/08/%E7%A9%B7%E5%BF%99%E7%9A%84%E4%BA%BA%E7%94%9F/"/>
    <id>https://matchless5233.github.io/2017/08/08/穷忙的人生/</id>
    <published>2017-08-08T11:38:37.000Z</published>
    <updated>2017-08-08T18:29:36.626Z</updated>
    
    <content type="html"><![CDATA[<p>1、</p>
<p>香港曾经有一档电视真人秀，叫做<a href="https://baike.baidu.com/item/%E7%A9%B7%E5%AF%8C%E7%BF%81%E5%A4%A7%E4%BD%9C%E6%88%98" target="_blank" rel="external">《穷富翁大作战》</a>，专门邀请富人体验穷人的生活。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071601.jpg" alt=""></p>
<p>有一期节目的主人公是<a href="http://baike.baidu.com/item/%E7%94%B0%E5%8C%97%E8%BE%B0" target="_blank" rel="external">田北辰</a>。他的父亲田元灏是香港纺织界的头面人物，人称”一代裤王”。他本科毕业于康奈尔大学电子工程专业，又去读了哈佛大学 MBA，回到香港后创办了服装品牌 G2000 和 U2，是那种很努力的”富二代”。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071602.jpg" alt=""></p>
<p>他崇尚自由竞争和人生奋斗，座右铭是”如果你今天对自己满意，明天就会被淘汰”，一直宣扬 “如果你有斗志，弱者也可以变成强者。”</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071603.jpg" alt=""></p>
<p>但是，参加了这次电视节目以后，他的观点发生了180度转变，对着电视镜头公开说：</p>
<blockquote>
<p>“这个社会在极严厉地惩罚，那些没条件读书的人。穷人一輩子都不可能变有钱人。在強弱悬殊的情况下，只有弱者越弱，越來越慘！”</p>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071604.jpg" alt=""></p>
<p>2、</p>
<p>田北辰为什么改变观点，认为穷人不可能翻身呢？原来，节目组请他<a href="http://cj.sina.com.cn/article/detail/2381596945/91594?column=china&amp;ch=9" target="_blank" rel="external">体验</a>了两天清洁工的生活，薪资是每小时25港币，每天的生活费只有50港币，住在只有1.6平方米的”笼屋”，月租1350港币。</p>
<p>所谓”笼屋”，外面看着像衣橱，门一拉开，里面只能放下一张床，关上门四面全挨着木板墙，东西都挂在墙上。就是这种条件，房产中介还称它为”豪华笼屋”，因为还有600港币的更低档，就是在马桶上放一块木板睡人。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071605.jpg" alt=""></p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071606.jpg" alt=""></p>
<p>上班时间是早上五点，地铁头班车还没开，只能坐夜宵巴士，车费是13港币，田北辰惊呼：”每天生活费只有50港币，这怎么坐得起！”</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071607.jpg" alt=""></p>
<p>开始工作后，好不容易熬到中午吃饭，但只有15元的预算，大部分的饭要20元，他最后只能坐在街边的楼梯上，就着白开水嚼干粮。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071608.jpg" alt=""></p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071609.jpg" alt=""></p>
<p>吃完了，还要抓紧时间躺在花坛上休息一会。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071610.jpg" alt=""></p>
<p>做满9个小时，就可以下班了。但是，真正的清洁工为了养家户口，还要去做夜班，一天在外近17个小时，只能睡5、6个小时。田北辰说，因为只有两天，自己才有斗志坚持下去，如果要做一个月，甚至半年，那就太绝望了！</p>
<blockquote>
<p>“没有学历、技术的人，为了活下去，不是住笼屋就是要工作到半夜，对于他们，最重要事情是下一顿吃什么，怎么会有时间和精力去思考未来怎么发展？来来去去都在死胡同！”</p>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071611.jpg" alt=""></p>
<p>3、</p>
<p>每天忙于工作，干到累死，但还是很穷，只能租屋住，没有自己的积蓄，一旦停止工作或者生病在床，生活来源顿时就成问题。田北辰体验的这种人生，社会学家早就注意到了，起名为”穷忙族”，百度百科的<a href="http://baike.baidu.com/item/%E7%A9%B7%E5%BF%99%E6%97%8F/1407708" target="_blank" rel="external">定义</a>如下。</p>
<blockquote>
<p>“穷忙族是指那些薪水不多，整日奔波劳动，却始终无法摆脱贫穷的人。最早出现于上世纪90年代的美国，指拼命工作仍然无法摆脱最低水准生活的人们。日本经济学家门仓贵史在《穷忙族》一书中，他对”穷忙族”下的定义是：每天繁忙地工作却依然不能过上富裕生活的人。”</p>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071614.jpg" alt=""></p>
<p>不仅香港有”穷忙族”，内地也越来越多。举例来说，根据<a href="http://news.sina.com.cn/o/2017-04-09/doc-ifyecfnu7833937.shtml" target="_blank" rel="external">报道</a>，2016年上海送外卖最多的送餐员，是一位叫做何文妹的中年女性，至少送出了12214单。即使全年无休，每天平均也要33单，从午饭时间一直送到深夜，一刻不停。电瓶车的电瓶，一天要准备6组。车上插着两个手机，一个导航，一个接单。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071612.jpg" alt=""></p>
<p>这种强度的劳动，每年能有多少收入呢？每单的送餐费是8元，这就是说，何文妹一年的送餐总收入在10万元左右。扣除电瓶费、车辆维护费、通信费等等以后，净收入大概还能剩下8万多元。这是”送餐王”的收入水平，大部分送餐员的收入，应该远不如她，可能只有一半左右。</p>
<p>上海的底层劳动者，收入基本就是这种水平。他们还要用这些钱支付房租。每天下班回到家，累得就想睡觉，睁开眼就要去上班，日复一日，人生的出路在哪里？</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071613.jpg" alt=""></p>
<p>4、</p>
<p>将来的”穷忙族”，不仅是低技能的底层劳动者，还将包括很多受过高等教育、写字楼工作的白领。年轻人如果没有家庭支持，想要靠自己的努力出人头地，会变得越来越难。因为单靠工资收入，已经不足以积累财富了。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071615.jpg" alt=""></p>
<p>有一项<a href="https://c.m.163.com/news/a/CH66B8Q700018M4D.html?spss=newsapp&amp;spsw=1" target="_blank" rel="external">统计</a>说：</p>
<blockquote>
<p>“1993年属于低等收入者的城里人，到了1995年有43%都能向上爬。而相比之下，2011年属于低等收入者的城里人，到了2013年只有20%摘掉最底层的帽子。一个不恰当的比喻，如果上世纪90年代算是城市穷人的黄金时代的话，那今天这种好日子已经结束了。”</p>
<p>“一方面，城里穷人越来越难走出贫困；另一方面，城里富人的位置也坐得越来越稳。1993-1995年，城里的高等收入者有64%的概率能一直当富人。而到了2011-2013年，高等收入者竟然有84%的概率能保证自己不被从富人列表中除名。”</p>
</blockquote>
<p>上面的数字就是说，如果你是穷人，80%的概率以后你还是穷人；如果你是富人，84%的概率是以后你还是富人。一个台湾人<a href="http://mapleduh.pixnet.net/blog/post/47158492" target="_blank" rel="external">感叹</a>说：</p>
<blockquote>
<p>“那种奴隶化的生活（长时间工作，却仅能勉强满足温饱）才是历史的常态。过去三十年社会阶层的大幅流动，是历史的不正常，现在开始回归常态。99%的我们，都面临着这种大趋势的吞噬：你的工资不变，但房价和物价却是越来越高，于是你必需花更多时间来挣钱，甚至一天做二份工，最后成为没有自己时间的奴隶。”</p>
</blockquote>
<p>总的来看，下一代青年不太可能有上一代那么多机会。经济增长率已经开始放缓，还将继续放缓，人口增长高峰已经过去，老龄化越来越严重，老人的消费远不及年轻人。矿业、制造业、零售业、证券业……除了高科技，几乎所有行业都不会有以前那么高的增长率。上一代人赶上了中国经济起飞，还拥有依靠房地产翻身的机会，但是下一代人不会再有这样的机会。你现在买入一套房子，十年后价值翻上十倍，完全是零可能。</p>
<p>越来越多的人将会发现，即使从小就努力学习，从很好的学校毕业，后来努力工作，但迎接他们的将是”长久的低薪、难升迁的职场、高昂的物价、买不起的房子……”。尽管你很努力，待人友善，有公德心，但就是挣不到钱，只能在社会的底层挣扎。</p>
<p>5、</p>
<p>2015年，社会工作者藤田孝典调查日本的老人问题。</p>
<p>他<a href="http://www.cup.com.hk/2017/06/26/the-poor-elderly-in-japan/" target="_blank" rel="external">发现</a>，很多老人年轻时都拿过中产阶级的薪水（400万日元），但是现在已经沦落到社会的底层，过着非常困苦的生活。”七老八十还要在大热天当廉价劳工，因经济拮据而妻离子散，唯有独居烂屋，孤零零度过晚年。”</p>
<p>藤田孝典将这些老人称为”下流老人”（底层老人）。他称，日本的下流老人以后可能会达到1亿人。要知道，日本现在的总人口也只有1.27亿。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071616.jpg" alt=""></p>
<p>下流老人有三大特征。（1）收入极低，即使政府提供补助费，也难以维持健康饮食，以及一般家庭应有的生活；（2）存款不足，老人必须提心吊胆地过活，一旦碰到突发事故或慢性病，日常已经捉襟见肘的生活，就会面临崩溃危险；（3）老无所依，子女连自己都养不起，更遑论赡养老人。日本不少老人因家庭破碎而长期独居，平日缺乏与亲朋邻里的交流，关系疏离，一旦发生意外无人照应。在晚年失去可以依靠的人，是下流老人最悲苦的特征。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071617.jpg" alt=""></p>
<p>下流老人的根源就是，钱花光了，人还没死。日本媒体还发明了一个词”老后破产”，这就是长寿的恶梦。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071618.jpg" alt=""></p>
<p>现代科技如此发达，人的寿命越来越长，可是工作又积累不了财富，于是，”清贫青年，流沙中年，下流老人”就成了大多数人必然的命运归宿。</p>
<p>（说明：本文选自我正在写的新书《未来世界的幸存者》，点击<a href="https://ruanyf.github.io/survivor/" target="_blank" rel="external">这里</a>免费阅读全书。）</p>
<p>（正文完）</p>
<p>=========================================================</p>
<p>下面是推广时间。今天要向大家介绍<a href="http://www.ichangtou.com/?utm_source=ruanyifeng&amp;utm_medium=ruanyifeng" target="_blank" rel="external">长投学堂</a>的<a href="http://www.ichangtou.com/#activitydetail:activity?id=60.html" target="_blank" rel="external">初级股票投资课程</a>。</p>
<p>普遍认为，程序员是一份高薪的职业。</p>
<blockquote>
<ul>
<li>工作 3 年，平均年收入：10-20 万；</li>
<li>工作3-5 年，平均年收入：15-30万；</li>
<li>工作5-10 年，平均年收入30-50万左右；</li>
</ul>
</blockquote>
<p>（数据来源：程序员客栈/稀土掘金）</p>
<p>但是，岗位总有天花板，如果还想提高收入，除了提高技能、升职加薪之外，其实还可以通过股票投资，给自己增加一份被动收入，甚至实现财富自由，都有可能。</p>
<p><a href="http://www.ichangtou.com/?utm_source=ruanyifeng&amp;utm_medium=ruanyifeng" target="_blank" rel="external"><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072601.png" alt=""></a></p>
<p>小熊之家，曾经是巴克莱银行的IT人员，程序员本身严密、理性的思维能力，让他在股票投资上如鱼得水。2007年～2015年，他个人美股投资累计收益263%，平均年化收益率12%；2013年～2015年，A股投资累计收益203%，平均年化收益率32.7%。</p>
<p>通过投资，他不再被工作束缚，并实现了财富自由。</p>
<p>2011年，他创立了理财在线教育网站—-<a href="http://www.ichangtou.com/?utm_source=ruanyifeng&amp;utm_medium=ruanyifeng" target="_blank" rel="external">长投学堂</a>，旨在让更多人通过学习掌握理财投资技能，实现财富增长。目前，<a href="http://www.ichangtou.com/?utm_source=ruanyifeng&amp;utm_medium=ruanyifeng" target="_blank" rel="external">长投学堂</a>的院生已超过100万人，大量院生从0开始学习理财，懂得如何获得工资以外的被动收入，让资产保值增值。</p>
<p>如果你不想被死工资绑定，如果你想让自己的理性思维和逻辑能力，在股票投资分析上大放异彩，不妨来长投学习这门股票投资初级课，<a href="http://www.ichangtou.com/#activitydetail:activity?id=60.html" target="_blank" rel="external">点击这里</a>打开。</p>
<p><a href="http://www.ichangtou.com/#activitydetail:activity?id=60.html" target="_blank" rel="external"><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072602.png" alt=""></a></p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-07-26T20:29:46+08:00">2017年7月26日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/opinions/" target="_blank" rel="external"> 观点与感想</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1、&lt;/p&gt;
&lt;p&gt;香港曾经有一档电视真人秀，叫做&lt;a href=&quot;https://baike.baidu.com/item/%E7%A9%B7%E5%AF%8C%E7%BF%81%E5%A4%A7%E4%BD%9C%E6%88%98&quot; target=&quot;_blank&quot; re
    
    </summary>
    
    
      <category term="Opinions" scheme="https://matchless5233.github.io/tags/Opinions/"/>
    
  </entry>
  
  <entry>
    <title>技术决定历史</title>
    <link href="https://matchless5233.github.io/2017/08/08/%E6%8A%80%E6%9C%AF%E5%86%B3%E5%AE%9A%E5%8E%86%E5%8F%B2/"/>
    <id>https://matchless5233.github.io/2017/08/08/技术决定历史/</id>
    <published>2017-08-08T07:12:13.000Z</published>
    <updated>2017-08-08T18:29:36.628Z</updated>
    
    <content type="html"><![CDATA[<p>1、</p>
<p>大学时期，我的专业是世界经济。那个专业需要学习《经济史》，了解古代的人们怎么挣钱和花钱。</p>
<p>《经济史》的课程很<a href="http://www.ruanyifeng.com/blog/2010/07/interesting_economic_history.html" target="_blank" rel="external">有趣</a>，读完以后，看待历史的眼光会不一样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052101.jpg" alt=""></p>
<p>以前，我觉得政治最重要，决定了历史的变迁。学了《经济史》，我认识到，经济比政治更重要。政治人物只是舞台上的演员，剧情走向早由经济因素决定了。</p>
<p>2、</p>
<p>举例来说，美国南北战争的根本原因就是经济。北方发展制造业，缺乏雇工，迫切希望南方种植园释放黑奴，让他们到工厂里面当工人。南方庄园主坚决不同意，一旦奴隶制度消失了，谁会愿意忍受烈日高温，到地里采棉花？如果棉花种植成本大幅上涨，就无法向欧洲出口，庄园主就会破产。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052102.jpg" alt=""></p>
<p>再比如，大明王朝的灭亡原因也是经济。历史学家黄仁宇<a href="https://book.douban.com/review/5700560/" target="_blank" rel="external">指出</a>，明朝财政非常困难，根本无力抵抗各种入侵。</p>
<blockquote>
<p>“在黄仁宇看来，明朝十六世纪的财税困境，在于低下的税收管理水平无法适应其极度复杂的税收结构，导致了财政系统全国范围内的混乱局面。而”奉行成例”的僵化思维又使任何有效的改革无法实行，从而使政府税收长期不足，公共行政能力十分低下，无法有效地行使政府职能，最终导致灾难性的后果。”</p>
</blockquote>
<p>3、</p>
<p>很长一段日子，我都持有这种”经济决定论”，进而沉迷于证券市场，相信”股市是经济的晴雨表”。就这样，浪费了很多时间。</p>
<p>后来，全球金融危机爆发，各国纷纷出台刺激经济的政策。这件事让我很困惑：经济学已经有几百年的历史，早就成了一门”科学”，但是为什么没能防止（甚至都没预测到）这么大规模的经济危机呢？</p>
<p>危机爆发之后，经济学家还在争论不休，回答不了几个最基本的问题：</p>
<blockquote>
<ul>
<li>危机会持续多久？</li>
<li>如何解决危机？</li>
<li>类似的危机将来会不会再发生？</li>
</ul>
</blockquote>
<p>我对经济学的信心，就是从那个时候开始动摇和崩溃的。</p>
<p>4、</p>
<p>在学校期间，我学会了制作网页，架设了个人网站。离开学校以后，更是亲身感受到了，互联网技术对整个社会和个人命运的巨大改变。</p>
<p>对我来说，技术变得比经济学更有吸引力了。渐渐地，我不再阅读经济学书籍了，转而大量阅读技术书籍。</p>
<p>熟悉科技史以后，我看待历史的观点，再一次发生了巨大的变化。我现在认为，主导历史的因素，短期（一年到几年）是政治，中期（几年到几十年）是经济，长期（几十年到几百年）则是技术。</p>
<p><strong>长期来看，政治和经济都不太重要，影响不了趋势，真正起决定性作用的是技术。</strong>政治和经济只能改变资源的分配和价格，只有技术才能创造出新东西。政治和经济只能使人类在平面上移动，只有技术才能使得人类向上提升，进入下一个阶段。</p>
<p>5、</p>
<p>我发现，人类的每一次大发展，都是技术推动的。</p>
<blockquote>
<p>（1）石器时代，人类学会了<strong>加工石材</strong>，有了最基本的工具，可以定居生活了，进入了氏族社会。</p>
<p>（2）等到掌握了<strong>粮食生产技术</strong>，人类有了多余的粮食，氏族就分化出了阶层，产生了贵族和首领。</p>
<p>（3）铁器时代，人类掌握了<strong>冶炼技术</strong>，能生产更好的农具和武器，拥有铁器的氏族开始征服其他氏族，慢慢演变成封建王国。</p>
<p>（4）欧洲的封建时期有1000多年，中国有2000多年，为什么会延续这么长？就是因为这段时间，技术没有重大突破。</p>
<p>（5）等到欧洲人掌握了<strong>造纸术</strong>和<strong>印刷术</strong>，新思想第一次可以廉价地大规模传播（此前都是羊皮的手抄书，一般人看不到），黑暗的中世纪因此终结，文艺复兴开始，人类进入近代社会。</p>
<p>（6）<strong>火药</strong>的出现，使得骑兵和城堡变得毫无作用，一小股军队就会拥有巨大的杀伤力，诸侯林立的欧洲开始统一为一个个民族国家，现代意义上的政府出现了。</p>
<p>（7）工业革命始于人类能够制造<strong>蒸汽机</strong>，生产力提升了一个数量级，要求大规模的社会分工和交换，由此诞生了资本主义制度，直到今天。</p>
</blockquote>
<p>总之，重大的新技术一旦出现，政治制度和经济制度—-不管主动或被动—-最终都会为之重构，让这项技术的威力发挥到最大。这就是为什么技术是最终的决定因素，决定了人类社会的演变。</p>
<p>6、</p>
<p>今天，我们正身处最新一次、也是最大一次的技术革命：信息技术革命。技术进步的速度日新月异，而且还在加速，这就注定了目前的人类社会也会随之大变。</p>
<p>很多我们习以为常的事情，都已经完全改变了。15年前，世界市值最大的前五大公司只有一家技术公司，今天已经全部是了。新技术创造了财富，财富也在流向技术。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052103.jpg" alt=""></p>
<p>中国也是如此，2017年中国市值最大的公司，是香港上市的腾讯，第二名是美国上市的阿里巴巴。曾经的巨无霸—-中国石油、工商银行、中国移动—-都被挤到后面去了。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052204.png" alt=""></p>
<p>时代已经变了，新人和新公司每天都在崛起，旧的公司和制度每天都在没落。技术正在加速重塑人类社会。</p>
<p>7、</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052105.jpg" alt=""></p>
<p>以色列学者尤瓦尔·赫拉利在《未来简史》一书中感叹：</p>
<blockquote>
<p>“现代科技已经让人类拥有了超过远古诸神的力量，我们的后代肯定将拥有神一样的创造力和毁灭力。</p>
<p>我们并不知道眼前的道路会把我们引向何方，也不知道我们那些像神一般的后代会是什么样子。”</p>
</blockquote>
<p>正如他所说，我们正身处在一个前人从未有过的处境：技术让人类这种渺小的生物，拥有了神一般的力量。这种力量会把我们带到哪里？完全不知道。</p>
<p>我的心情很矛盾。一方面，对未来的新技术，我感到无比兴奋和期待，就像推特上面一位网友所说。</p>
<blockquote>
<p>“一想到我的寿命只有几十年，我就感到特别难过。倒不是因为我害怕死亡，而是因为我将没有机会看到，未来一千年中各种新奇有趣的新技术。”</p>
</blockquote>
<p>另一方面，我还有一种不好的预感。人类掌握的技术，已经强大到足以毁灭人类自身，在技术面前，普通人（大多数人都是普通人）已经<a href="http://www.ruanyifeng.com/blog/2016/08/useless-people.html" target="_blank" rel="external">没有多大用处</a>了。人类的历史将会怎样改变？这不禁令人充满了在劫难逃的担忧。</p>
<p>（说明：本文选自我正在写的新书《未来世界的幸存者》，点击<a href="https://ruanyf.github.io/survivor/" target="_blank" rel="external">这里</a>免费阅读全书。）</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-05-23T06:44:43+08:00">2017年5月23日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/opinions/" target="_blank" rel="external"> 观点与感想</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1、&lt;/p&gt;
&lt;p&gt;大学时期，我的专业是世界经济。那个专业需要学习《经济史》，了解古代的人们怎么挣钱和花钱。&lt;/p&gt;
&lt;p&gt;《经济史》的课程很&lt;a href=&quot;http://www.ruanyifeng.com/blog/2010/07/interesting_econom
    
    </summary>
    
    
      <category term="Opinions" scheme="https://matchless5233.github.io/tags/Opinions/"/>
    
  </entry>
  
  <entry>
    <title>如何验证 Email 地址：SMTP 协议入门教程</title>
    <link href="https://matchless5233.github.io/2017/08/08/%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81-Email-%E5%9C%B0%E5%9D%80%EF%BC%9ASMTP-%E5%8D%8F%E8%AE%AE%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    <id>https://matchless5233.github.io/2017/08/08/如何验证-Email-地址：SMTP-协议入门教程/</id>
    <published>2017-08-08T03:14:42.000Z</published>
    <updated>2017-08-08T18:29:36.626Z</updated>
    
    <content type="html"><![CDATA[<p>Email 是最常用的用户识别手段。</p>
<p>开发者常常需要验证邮箱的真实性。一般的方法是，注册时向该邮箱发出一封验证邮件，要求用户点击邮件里面的链接。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062501.png" alt=""></p>
<p>但是很多时候（比如要搞邮件营销时），拿到的是成千上万现成的 Email 地址，不可能通过回复确认真实性，这时该怎么办呢？</p>
<p>答案就是使用 <a href="http://baike.baidu.com/item/SMTP/175887?fromtitle=SMTP%E5%8D%8F%E8%AE%AE&amp;fromid=421587" title="SMTP%E5%8D%8F%E8%AE%AE&amp;fromid=421587" target="_blank" rel="external">SMTP 协议</a>。本文将介绍如何通过该协议验证邮箱的真假。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062502.jpg" alt=""></p>
<p>另外，结尾处还有一则移动端 H5 开发的<a href="#support">培训消息</a>，欢迎关注。</p>
<h2 id="一、SMTP-协议简介"><a href="#一、SMTP-协议简介" class="headerlink" title="一、SMTP 协议简介"></a>一、SMTP 协议简介</h2><p>SMTP 是”简单邮件传输协议”（Simple Mail Transfer Protocol）的缩写，基于 TCP 协议，用来发送电子邮件。</p>
<p>只要运行了该协议的服务器端（daemon），当前服务器就变为邮件服务器，可以接收电子邮件。</p>
<p>验证 Email 邮箱的基本思路如下。</p>
<blockquote>
<ol>
<li>找到邮箱所在域名的 SMTP 服务器</li>
<li>连接该服务器</li>
<li>询问有没有该邮箱</li>
<li>如果服务器返回 250  或 251 状态码，邮箱就是真的；如果返回 5xx（500～599），就是假的。</li>
</ol>
</blockquote>
<p>注意，即使服务器确认邮箱是真的， 也不代表邮件一定会发送到该邮箱，更不代表用户一定会读到该邮件。</p>
<h2 id="二、查找域名的-MX-记录"><a href="#二、查找域名的-MX-记录" class="headerlink" title="二、查找域名的 MX 记录"></a>二、查找域名的 MX 记录</h2><p>下面通过一个例子，演示如何验证<code>test@gmail.com</code>这个邮箱。</p>
<p>首先，需要查找<code>gmail.com</code> 的 MX 记录。它指向真正处理邮件的那台服务器。</p>
<blockquote>
<p>$ nslookup</p>
<blockquote>
<pre><code>`&lt;/pre&gt;
</code></pre></blockquote>
</blockquote>
<pre><code>输入`nslookup`命令后，会提示一个大于号，表示等待用户进一步输入。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<blockquote>
<p>set q=mx<br>gmail.com<br>    `</p>
</blockquote>
</blockquote>
<pre><code>上面代码中，`set q=mx`设定查询的是 MX 记录，第二行输入要查找的域名，结果返回了5条 MX 记录。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>Server:     192.168.1.1
Address:    192.168.1.1#53

Non-authoritative answer:
gmail.com   mail exchanger = 20 alt2.gmail-smtp-in.l.google.com.
gmail.com   mail exchanger = 30 alt3.gmail-smtp-in.l.google.com.
gmail.com   mail exchanger = 10 alt1.gmail-smtp-in.l.google.com.
gmail.com   mail exchanger = 5 gmail-smtp-in.l.google.com.
gmail.com   mail exchanger = 40 alt4.gmail-smtp-in.l.google.com.
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>`gmail.com`是很大的邮件服务商，所以会有多条记录，一般的域名只有一条。如果这一步查不到 MX 记录，该邮箱肯定是假的。

除了自己执行`nslookup`，也可以使用线上服务（[1](https://mxtoolbox.com/)，[2](http://www.nmonitoring.com/show-mx-record.html)，[3](http://www.dnsqueries.com/en/mx-lookup.php)）。更多 DNS 的介绍，请参考[《DNS 原理入门》](http://www.ruanyifeng.com/blog/2016/06/dns.html)。

## 三、建立 TCP 连接

知道了邮件服务器的地址，就可以与它建立 [TCP](http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html) 连接了。SMTP 协议的默认端口是25。使用 Telnet 或 Netcat 命令，都可以连接该端口。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ telnet gmail-smtp-in.l.google.com 25
# 或者
$ nc gmail-smtp-in.l.google.com 25
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>服务器返回`220`状态码，就表示连接成功。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>220 mx.google.com ESMTP f14si7006176pln.607 - gsmtp
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>接下来，就可以使用 SMTP 协议的各种命令与邮件服务器交互了。

## 四、HELO 命令和 EHLO 命令

SMTP 协议规定，连接成功后，必须向邮件服务器提供连接的域名，也就是邮件将从哪台服务器发来。

假定从`mail@example.com`向`test@gmail.com`发送邮件，这里要提供的域名就是`example.com`。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>HELO exampl.com
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>邮件服务器返回状态码`250`，表示响应成功。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>250 mx.google.com at your service
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>不过，`HELO`命令现在比较少用，一般都使用`EHLO`命令。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>EHLO example.com
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>邮件服务器收到`EHLO`命令以后，不仅会返回`250`状态码，还会返回自己支持的各种扩展的列表。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>250-mx.google.com at your service, [114.84.160.153]
250-SIZE 157286400
250-8BITMIME
250-STARTTLS
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-CHUNKING
250 SMTPUTF8
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>## 五、MAIL FROM 命令

然后，连接者要使用`MAIL FROM`命令，向邮件服务器提供邮件的来源邮箱。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>MAIL FROM:&amp;lt;mail@example.com&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码表示，连接者将从`mail@example.com`向邮件服务器发送邮件。邮件服务器返回`250`状态码，表示响应成功。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>250 2.1.0 OK h10si3194349otb.59 - gsmtp
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>SMTP 是一个很简单的协议，本身没有规定如何验证邮件的来源，也就是说，不验证邮件是否真的从`mail@example.com`发来，所以导致了后来垃圾邮件泛滥。为了控制垃圾邮件，许多邮件服务器会用自己的方法验证邮件地址，下面就是其中的一些方法。

&gt; *   example.com 是否有 MX 记录
</code></pre><blockquote>
<ul>
<li>example.com 是否可以 Ping 通</li>
<li>是否存在 postmaster@example.com 这个邮箱</li>
<li>发起连接的 IP 地址是否在黑名单之中</li>
<li>IP 地址的反向 DNS 解析，是否指向一个邮件服务器</li>
</ul>
</blockquote>
<pre><code>## 六、RCPT TO 命令

最后一步就是使用`RCPT TO`命令，验证邮件地址是否存在。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>RCPT TO:&amp;lt;test@gmail.com&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>邮件服务器返回了`550`状态码，表示该 Email 地址不存在。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>550-5.1.1 The email account that you tried to reach does not exist. Please try
550-5.1.1 double-checking the recipient&apos;s email address for typos or
550-5.1.1 unnecessary spaces. Learn more at
550 5.1.1  https://support.google.com/mail/?p=NoSuchUser p34si3372771otp.228 - gsmtp
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>如果查询的是一个真实的 Email 地址，邮件服务器就会返回`250`状态码。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>RCPT TO:&amp;lt;yifeng.ruan@gmail.com&gt;
250 2.1.5 OK p34si3372771otp.228 - gsmtp
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>一般来说，状态码 250 和 251 都表示邮箱存在，状态码 5xx 表示不存在，其他状态码（主要是 4xx）则代表无法确认。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>RCPT TO:&amp;lt;xxx@censored.pl&gt;
451 Temporary local problem - please try later
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>验证完成后，使用`QUIT`命令关闭 TCP 连接。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>QUIT
221 2.0.0 closing connection p34si3372771otp.228 - gsmtp
</code></pre></blockquote>
<h2 id="七、参考链接"><a href="#七、参考链接" class="headerlink" title="七、参考链接"></a>七、参考链接</h2><ul>
<li><a href="http://blog.online-domain-tools.com/2014/11/14/how-to-verify-email-address/" target="_blank" rel="external">How to Verify Email Address</a></li>
<li><a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" target="_blank" rel="external">Simple Mail Transfer Protocol</a></li>
</ul>
<p>（正文完）</p>
<p>==============================</p>
<p><a id="support"></a></p>
<p>下面是推广时间。移动端开发的市场广，就业潜力大，现在有一门移动端 H5 开发的课程推荐给大家。</p>
<p><a href="http://apeclass.cn/" target="_blank" rel="external">海棠学院</a>是一家专业的前端教育机构，一直与我有合作、受到很多学员好评。他们这次推出<a href="http://apeclass.cn/article/267" target="_blank" rel="external">《移动端开发 + 职业技能》</a>大型公开课，介绍 H5 开发，为期三周。</p>
<p>该课程将带领您一步一步学习移动端页面的开发，手把手教你做出下面的页面。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062503.png" alt=""><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062504.png" alt=""></p>
<p>完整的课程大纲请参考<a href="http://apeclass.cn/article/267" target="_blank" rel="external">这里</a>。</p>
<p>除了技术课程，还会有一次《前端开发流程、求职、职场》的公开课，由海棠学院创始人张小河主讲，帮助你了解前端工程师的就业市场和职业规划。</p>
<blockquote>
<ul>
<li>前端新手如何进入喜欢的公司？</li>
<li>公司真实的开发流程是怎么样的？</li>
<li>为什么看了 100G 的视频/资料，你也没有学好？</li>
<li>如何成为高年薪的前端工程师？</li>
</ul>
</blockquote>
<p>这堂公开课是免费的，点击<a href="http://apeclass.cn/article/267" target="_blank" rel="external">这里</a>了解详情。</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-06-25T22:08:13+08:00">2017年6月25日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/computer/" target="_blank" rel="external"> 理解计算机</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Email 是最常用的用户识别手段。&lt;/p&gt;
&lt;p&gt;开发者常常需要验证邮箱的真实性。一般的方法是，注册时向该邮箱发出一封验证邮件，要求用户点击邮件里面的链接。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/
    
    </summary>
    
    
      <category term="Computer" scheme="https://matchless5233.github.io/tags/Computer/"/>
    
  </entry>
  
  <entry>
    <title>45岁以后的人生</title>
    <link href="https://matchless5233.github.io/2017/08/08/45%E5%B2%81%E4%BB%A5%E5%90%8E%E7%9A%84%E4%BA%BA%E7%94%9F/"/>
    <id>https://matchless5233.github.io/2017/08/08/45岁以后的人生/</id>
    <published>2017-08-07T18:16:35.000Z</published>
    <updated>2017-08-08T18:29:36.622Z</updated>
    
    <content type="html"><![CDATA[<p>1、</p>
<p>2017年初，网上<a href="http://finance.sina.com.cn/chanjing/cyxw/2017-03-16/doc-ifycnikk0820270.shtml" target="_blank" rel="external">流传</a>华为公司正在清理34岁以上的员工。</p>
<pre><code>&gt; &quot;中国区开始集中清理34+的交付员工，......去向是跟海外服务部门交换今年新毕业的校招员工，也就是进新人，出旧人。
</code></pre><blockquote>
<p>这些旧人目测要被输出去海外，实际上就是变相裁员，这些30多岁的老杆子，英语又不好，拖家带口，能出去海外安心奋斗的没几个，即使出去了幸存的也不多。”</p>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061901.png" alt=""></p>
<p>华为公司<a href="http://tech.sina.com.cn/t/2017-02-14/doc-ifyameqr7511803.shtml" target="_blank" rel="external">否认</a>该消息。但是，不久以后又传出了一个<a href="http://people.pedaily.cn/201611/20161121405632.shtml" target="_blank" rel="external">消息</a>，华为规定45岁必须退休。</p>
<blockquote>
<p>“为保持公司年轻化，退休政策即将微调，从”45岁可以退休”改变为”45岁须退休”，想继续工作的，需人力资源部重新审批。”</p>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061904.jpg" alt=""></p>
<p>一时间，网上议论纷纷：34岁清理一批，45岁强制离职，这是什么样的人事政策啊！</p>
<p>2、</p>
<p>我不讨论这个消息的真假，因为我也不知道。<strong>我只指出一个事实：IT 行业是一个年轻人的行业。</strong></p>
<p>随便哪一家 IT 公司，你去参观，主要员工都是年轻人，40岁以上的很少见，高管往往也是20几岁的年轻人。长久以来，一直有人<a href="https://www.baidu.com/s?wd=40%E5%B2%81%E4%BB%A5%E4%B8%8A%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%8E%BB%E5%93%AA%E9%87%8C%E4%BA%86%3F&amp;rsv_spt=1&amp;rsv_iqid=0xa3920a67000003df&amp;issp=1&amp;f=8&amp;rsv_bp=0&amp;rsv_idx=2&amp;ie=utf-8&amp;tn=baiduhome_pg&amp;rsv_enter=1&amp;rsv_n=2&amp;rsv_sug3=1" target="_blank" rel="external">问</a>：”40岁以上的程序员都去哪里了？”</p>
<p>老员工在这个行业是稀有动物，从35岁开始，数量急剧减少，年龄越大越稀有。华为的传闻只是从一个侧面，验证了大家的这种感觉。</p>
<p>3、</p>
<p>为什么 IT 公司都是年轻人的天下？我认为主要原因有两个。</p>
<p>首先，工作强度太大了。IT 公司的加班是家常便饭，业务越忙、加班时间越长。很多团队都采用”996”工作制：早上9点上班，晚上9点下班，每周六天。杭州有一家全世界最著名的电子商务公司，天天半夜12点，办公楼灯火通明，门口等着接生意的出租车排成一长队。有一项统计<a href="https://www.ithome.com/html/it/287990.htm" target="_blank" rel="external">《2016年 IT 公司加班时间排行榜》</a>，华为排在第一位，平均每个工作日加班3.96小时，第二位是腾讯，加班3.92小时。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061902.jpg" alt=""></p>
<p>人的生理和智能的最高峰是20岁～30岁这个年龄段。过了30岁，身体就慢慢走下坡路了，思维也不如以前活跃了。年轻的时候，长年累月的加班或许还可以承受，等进入中年，再这样拼，你的身体吃得消吗？加班好比折旧，加班越凶，折旧越快。我见过很多程序员刚过30岁，但看上去好像40岁，长期的缺乏运动和工作压力，使得他们的身体有着各种疾病，实际上已经不能承担高强度的工作，或者 deadline（截止期）的赶工压力了。</p>
<p>另一方面，即使你可以咬紧牙关撑下去，家里人答应吗？父母和妻儿天天看不到你，她们能受得了？万一父母住院，或者小孩在幼儿园被其他同学打了，你能不闻不问，继续全部心思扑在工作上？</p>
<p>4、</p>
<p>IT 公司缺少老员工的第二个原因是，这个行业变化太快了，老员工没优势。</p>
<p>老员工的优势是经验和人脉，可是在 IT 行业，这两样东西都不是特别重要，新事物层出不穷，旧事物没多久就无人问津。最近的行业热点：共享单车、直播、VR、区块链、O2O……都是新事物，史无前例，大家都没经验。谁占领了市场，谁就成了标准。而且，新事物的市场往往主要是青年，他们接受新事物的程度最快最高，用”90后”去设计产品、打开市场，可能比使用”70后”有效得多。</p>
<p>这个行业里面，起决定性作用的是新技术。技术进步的速度，比市场的变化还快，每年都有大量新技术出来。你22岁大学毕业入职，等到10年过去了，32岁时你大学里面学到的东西都没用了，你必须和新人一样从头开始学习新技术。你也许会说，怎么可能都没用呢，难道微积分、统计学、编程原理这些都没用了吗？问题是新人也学过这些啊，而且他们刚刚学，不像你已经忘得差不多了。</p>
<p>5、</p>
<p>企业发现，新人可以全身心投入工作，连续加班，可塑性高，又比较听话，不像老员工，资格太老而变得油滑，一有不满就到处抱怨，或者上班时间经常到吸烟区吞云吐雾。</p>
<p>更糟糕的是，老员工的工资比新员工高得多。如果老员工没有能力优势，反而拿着比新人高几倍的工资，对企业来说，应该怎么做，就不言自明了。</p>
<p>中国的 IT 企业里面，第一线员工干到34岁时，大概已经拼搏了10年以上，再拼命有点力不从心了。对企业来说，该员工最能创造价值的巅峰也已经过去了。等他到了45岁，如果还没有当上高管，很可能已经创造不了价值了，再留着他反而可能有负作用，让企业变成松松跨跨的养老院。</p>
<p>这就是为什么大家觉得华为的传闻可信，因为符合逻辑。如果员工都是<a href="http://baike.baidu.com/item/%E5%A5%8B%E6%96%97%E8%80%85%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">“奋斗者”</a>，你说谁更容易有奋斗精神，25岁还是45岁？</p>
<p>好在 IT 行业的<a href="http://cj.sina.com.cn/article/detail/2381596945/205351" target="_blank" rel="external">工资</a>现在还是不错的，即使45岁退休了，生活水平也不会一时下降太多。如果能够拿到公司的股票，而公司又非常成功（比如华为），那么可能不用等到45岁，你自己早早就走了，享受生活不再为人打工了。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061903.jpg" alt=""></p>
<p>马云在湖畔大学对企业家<a href="https://tech.sina.cn/i/gn/2017-03-27/detail-ifycstww1349717.d.html" target="_blank" rel="external">上课</a>，第一课就说： “<strong>小公司的成败在于你聘请什么样的人，大公司的成败在于你开除什么样的人。大公司里有很多老白兔，不干活，并且慢慢会传染更多的人。</strong>“可见最成功的企业家早就认可这种做法。</p>
<p>6、</p>
<p>我估计，34岁之前晋升到中级，45岁之前晋升到高管，否则强制退休，会成为 IT 行业的惯例。随着其他行业正在日益变成”互联网 +”，这种做法还有向其他行业扩展的可能。</p>
<p>这就提出了一个很严峻的问题。如果你没有在期限之前晋升到中级或高管，那么到45岁就没工作了，你该怎么办？45岁还是一个很有活力的年龄，就这样退休，对社会是人力资源浪费，对个人也很残酷。可是，那时你找得到工作吗？或者即使找到工作，你还能拿到原来岗位的那种报酬吗？</p>
<p>现实是非常残酷的。一个名叫”蓝血研究”的公号里面，贴出过一篇据说是华为被裁员工的<a href="http://view.inews.qq.com/a/20170222A00W2R00" target="_blank" rel="external">文章</a>。首先，作者表示理解华为的做法。</p>
<blockquote>
<p>“年龄大，股票多的员工消耗了华为大量的成本，公司要清理这样的员工为年轻世代释放出更大的空间，这是极其合理的事情。而且大部分的老员工基本已经财务自由，就算没有完全自由，保留的股票也基本可以衣食无忧。”</p>
</blockquote>
<p>但是，现实情况却是”强制退休或者不续约的，都不是年龄大和股票多的高成本员工，反而是在华为兢兢业业十来年，考评普通职级一般，收入和股票都偏低的那一群人”。</p>
<p>作者认为很多高职级的管理者更应该被裁掉。</p>
<blockquote>
<p>“高管真的是那么不可或缺吗？我真心不觉得是这样，很多情况下恰恰相反。当前很多高管其实离业务很远，让他们去做一件基层员工的事情，他们反而是做不了的，自己也没有做什么高大上的战略性的事情，每天就是开会开会开会，分配任务。大部分都貌似很忙，每天都开会到很晚，但是真的对业务有多大帮助呢？大家心里都有一杆秤！一边是我们的基层大龄扎实贡献的员工被裁被退休，一边是管理者的岗位职级嗖地往上涨，公平何在？公理何在？”</p>
<p>“一个19级的管理者的年收入大概是他所管理的15级员工的5倍，但是19级的贡献度真的是15级的5倍吗？以现在的体制，把15级的人扔到19级的岗位上，该部门会出大乱子吗？业务就会因此出现毁灭性打击吗？还是说15级经过几个月适应，竟然也能干19级的岗位。到底是谁 overpay, 到底是谁应该被退休？”</p>
</blockquote>
<p>7、</p>
<p>我觉得，每个人都应该想一想，你的雇主如果没有你，是不是就会有重大损失？一个新人或更基层的员工接手你的岗位，他/她能不能上手，而他们要求的报酬又会是多少？</p>
<p>技术的进步让人类活得更长更健康，但也让我们变得不那么<a href="http://www.ruanyifeng.com/blog/2016/08/useless-people.html" target="_blank" rel="external">有用</a>了。将来也许每个人都要选择两次自己的人生：一次是大学毕业找工作时，另一次是45岁没有工作时。</p>
<p>（说明：本文选自我正在写的新书《未来世界的幸存者》，点击<a href="https://ruanyf.github.io/survivor/" target="_blank" rel="external">这里</a>免费阅读全书。）</p>
<p>（正文完）</p>
<p>=================================================</p>
<p><a id="support"></a></p>
<p>下面是推广时间。</p>
<p>工程师的未来在哪？最终成为高级工程师，还是资深程序员？</p>
<p>其实，还有一条路，就是通过投资逆袭。</p>
<p>这里有一个理财课程”长投学堂”推荐给大家。</p>
<p>创始人小熊之家和 CTO 罗宾都是程序员出身。10年来，小熊之家相继投资美股、A股，A股投资累计收益203%，平均年化收益率32.7%。而后他们辞职投身于财商教育，旨在让更多人通过投资理财，让生活变得更好。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062401.png" alt=""></p>
<p>“长投学堂”的课程体系完善，你可以在这里全面了解各种投资品：</p>
<blockquote>
<ul>
<li>如何让资产稳定增值</li>
<li>如何听懂满嘴术语的销售</li>
<li>如何不被各种不靠谱的P2P、民间借贷蒙骗</li>
</ul>
</blockquote>
<p>你可以通过学习，获取智慧，改变生活。</p>
<p>“长投学堂”让对理财懵懵懂懂的零基础人群，通过学习，获取智慧，改变生活。</p>
<p>目前，长投学生已经超过100万，最著名的”21天小白理财训练营”的学生超过10万。这些学生不仅财务状况得到了改善，而且日常生活规划得更加井井有条。</p>
<p>“21天小白理财训练营”已经开办到第29期。加入QQ群，就会有经验丰富的班主任手把手地教你理财，QQ 群号 513394041。现在就拿出你的手机，扫描下面二维码，只需 9 元钱，就可以开始21天的投资学习之旅。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062402.png" alt=""></p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-06-29T07:09:01+08:00">2017年6月29日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/opinions/" target="_blank" rel="external"> 观点与感想</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABPZJREFUeNqMyXtM1WUcx/FnNTdreAVCEEThyEFUrM2kwkpS05qVl8rugVpRUelaJdZaWWktdZKHssImgV04osgBCbwAa2Whm6GWoXHxcD1wHiI4t9/z/H68+wO3av1R3+217/b+CFStsHq/W2V1HW+wOmq8VkeN/E+dR/7SUSOtrmOnLc93jxA6LsTw71XLrUsHsNwHsdxl/09HGVb7QawOF1bn4ZF26QDDsmqNsH7be9psKcJs+fy/tRZjXvwM//678BVdT6BsMarhxZHeug+reW+TMC84+s0LDv4tH7PZgdXqwGrLx7yYP9KaHISOvUCwYh3+4iUMOiIJVmSMbBfy+4X581Zp/ryVfzi/FfPXd1AntxNwvkvg6zfQZ7Zg/rIV8/x7qB9fJlT/JPrcm4SOPctg3ihCR5dhNu2QQjfmSt2Yi27MRf+Uiz67Ef1TLv7Ct5CPZtMzJ4N2243Ij7Kwmjdhnt+EUZeFr/BmhvYkoBqewl8yD9/eCejGTVLoUzlSn8pBn8xBn85B/fAcf7z6PJ7rl9KdNBdP6nwuJc2jL+9+jJrXGNr1On9seZHgkQ0ESq8l4EzBOLKMod1XoE6slUKfXCd1wxp0Qxb6RBYDLzxGz8xb8aSm05u2kL4bF9N902I89yzHe986PEseoGP2YjqfvpNQeTr+4rmEKucz6LgS9f1jUuiy+VIfvxvz1GoGN99Hz8wFeGan0zl3Ae4lK3A/vJb2x7PpWPEI3bevoHfJKtypt9H1UgbDZx5E//goofJF+AtmoasWSaG2jZE6P5zg9hQ8Nyyie1Y6rQ+vpafMhdHXx7BpgjWMr7sbT5kL9/IHcUck0X3LtfgLVqAP3YAumoHeHYvaPkYKlRcudf54Bh5KpjP5Fi69tplgIMCQabK/rIxtO3bgqqxkmJHzdXbRknYbrWIcrWEJ9D8RjXaMRe2ciNo5QQr1QYRUjnC8C1Nxr1pD0O/HFwyQmZmJ3W4nLS0Nm83G+vXrsSwLgP6vS2kWo/lNjKN57gTMTyJRH0Si8iZKoXZdI5Ujkt55SXRtfBuAffv2sXLlSpxOJ9nZ2SQkJBAWFobX6wVgoPooLWI0v4hxuFeFY30ahdoVhcqLkEJ9GCV1QRTehZNxZ9wPQNGXX5KZmUlbWxspKSkIIUhPT0dZFibQvSaHJjGKxujxBHZGoT+ehPpwEsoRIYUqmCR1YTTBd2NoGxtOz4Y3CPoDrNuwnuhpU7lq/HgW3LGU5l4P2h+g55XNnBOjORM/jsH3ozGLYlAFMag90ahPI6VQxZOlKo5BOyfjey+GliljaL0uA7l9D2f37uess5KBoyfwbvmIJnsajVePouXeCIKFsZglsajiyX8pvEYKoySm33DGYTjj0OVxhEri6N84kfalY2i/NRb3AhvNN0+i9Y4wPC+H4yuMxTocjzoYj7F/ymVxI/+ryH5huKaeMVzxGK54QuXT8B+y4atIZqB8Nt6SVDzFqXi+mIO39Dp+PziHwdIZDJVOJ3gogZArHsM1BcMVj1E+BcMVe1GY38auNqqnYdQkEKpOJPBNEv7DdnyVdnwVdoYqki+bge9wCv6qFAJVyQS/mU6oJhHjSCJG9VSM6kRUfXi2GK6fJYy6+CyjNrHRqLP1GbWJ0qizSfV39Tap6qdLVW+Xqt4ujfokadRdVpvgNWpt54y6qc8MV44Sfw4An+t+Gj1AKyYAAAAASUVORK5CYII=" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1、&lt;/p&gt;
&lt;p&gt;2017年初，网上&lt;a href=&quot;http://finance.sina.com.cn/chanjing/cyxw/2017-03-16/doc-ifycnikk0820270.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;
    
    </summary>
    
    
      <category term="Opinions" scheme="https://matchless5233.github.io/tags/Opinions/"/>
    
  </entry>
  
  <entry>
    <title>IaaS，PaaS，SaaS 的区别</title>
    <link href="https://matchless5233.github.io/2017/08/07/IaaS%EF%BC%8CPaaS%EF%BC%8CSaaS-%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>https://matchless5233.github.io/2017/08/07/IaaS，PaaS，SaaS-的区别/</id>
    <published>2017-08-07T15:09:03.000Z</published>
    <updated>2017-08-08T18:29:36.626Z</updated>
    
    <content type="html"><![CDATA[<p>越来越多的软件，开始采用云服务。</p>
<p>云服务只是一个统称，可以分成三大类。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072301.jpg" alt=""></p>
<blockquote>
<ul>
<li><strong>IaaS</strong>：基础设施服务，Infrastructure-as-a-service</li>
<li><strong>PaaS</strong>：平台服务，Platform-as-a-service</li>
<li><strong>SaaS</strong>：软件服务，Software-as-a-service</li>
</ul>
</blockquote>
<p>它们有什么区别呢？</p>
<p>IBM 的软件架构师 Albert Barron 曾经使用披萨作为比喻，<a href="https://www.linkedin.com/pulse/20140730172610-9679881-pizza-as-a-service" target="_blank" rel="external">解释</a>这个问题。David Ng 进一步<a href="https://m.oursky.com/saas-paas-and-iaas-explained-in-one-graphic-d56c3e6f4606" target="_blank" rel="external">引申</a>，让它变得更准确易懂。</p>
<p>请设想你是一个餐饮业者，打算做披萨生意。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072302.jpg" alt=""></p>
<p>你可以从头到尾，自己生产披萨，但是这样比较麻烦，需要准备的东西多，因此你决定外包一部分工作，采用他人的服务。你有三个方案。</p>
<p><strong>（1）方案一：IaaS</strong></p>
<p>他人提供厨房、炉子、煤气，你使用这些基础设施，来烤你的披萨。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072303.jpg" alt=""></p>
<p><strong>（2）方案二：PaaS</strong></p>
<p>除了基础设施，他人还提供披萨饼皮。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072304.jpg" alt=""></p>
<p>你只要把自己的配料洒在饼皮上，让他帮你烤出来就行了。也就是说，你要做的就是设计披萨的味道（海鲜披萨或者鸡肉披萨），他人提供平台服务，让你把自己的设计实现。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072308.jpg" alt=""></p>
<p><strong>（3）方案三：SaaS</strong></p>
<p>他人直接做好了披萨，不用你的介入，到手的就是一个成品。你要做的就是把它卖出去，最多再包装一下，印上你自己的 Logo。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072305.jpg" alt=""></p>
<p>上面的三种方案，可以总结成下面这张图。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072306.png" alt=""></p>
<p>从左到右，自己承担的工作量（上图蓝色部分）越来越少，IaaS &gt; PaaS &gt; SaaS。</p>
<p>对应软件开发，则是下面这张图。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072307.jpg" alt=""></p>
<p><strong>SaaS 是软件的开发、管理、部署都交给第三方，不需要关心技术问题，可以拿来即用。</strong>普通用户接触到的互联网服务，几乎都是 SaaS，下面是一些例子。</p>
<blockquote>
<ul>
<li>客户管理服务 Salesforce</li>
<li>团队协同服务 Google Apps</li>
<li>储存服务 Box</li>
<li>储存服务 Dropbox</li>
<li>社交服务 Facebook / Twitter / Instagram</li>
</ul>
</blockquote>
<p><strong>PaaS 提供软件部署平台（runtime），抽象掉了硬件和操作系统细节，可以无缝地扩展（scaling）。开发者只需要关注自己的业务逻辑，不需要关注底层。</strong>下面这些都属于 PaaS。</p>
<blockquote>
<ul>
<li>Heroku</li>
<li>Google App Engine</li>
<li>OpenShift</li>
</ul>
</blockquote>
<p><strong>IaaS 是云服务的最底层，主要提供一些基础资源。</strong>它与 PaaS 的区别是，用户需要自己控制底层，实现基础设施的使用逻辑。下面这些都属于 IaaS。</p>
<blockquote>
<ul>
<li>Amazon EC2</li>
<li>Digital Ocean</li>
<li>RackSpace Cloud</li>
</ul>
</blockquote>
<p><strong>参考链接</strong></p>
<ul>
<li><a href="https://m.oursky.com/saas-paas-and-iaas-explained-in-one-graphic-d56c3e6f4606" target="_blank" rel="external">SaaS, PaaS and IaaS explained in one graphic</a>, by David Ng</li>
<li><a href="https://www.computenext.com/blog/when-to-use-saas-paas-and-iaas/" target="_blank" rel="external">When to use SaaS, PaaS, and IaaS</a>, by Eamonn Colman</li>
</ul>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-07-23T11:20:46+08:00">2017年7月23日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/computer/" target="_blank" rel="external"> 理解计算机</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;越来越多的软件，开始采用云服务。&lt;/p&gt;
&lt;p&gt;云服务只是一个统称，可以分成三大类。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072301.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;b
    
    </summary>
    
    
      <category term="Computer" scheme="https://matchless5233.github.io/tags/Computer/"/>
    
  </entry>
  
  <entry>
    <title>树莓派新手入门教程</title>
    <link href="https://matchless5233.github.io/2017/08/06/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    <id>https://matchless5233.github.io/2017/08/06/树莓派新手入门教程/</id>
    <published>2017-08-05T23:24:23.000Z</published>
    <updated>2017-08-08T18:29:36.626Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.raspberrypi.org/" target="_blank" rel="external">树莓派</a>（Raspberry Pi）是学习计算机知识、架设服务器的好工具，价格低廉，可玩性高。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061501.png" alt=""></p>
<p>本文根据我的亲身经验，介绍如何从零开始，搭建一个树莓派服务器，控制 LED 灯。你会看到，树莓派玩起来实在很容易。</p>
<p>我要感谢 <a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">100offer</a> 对我提供赞助。<a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">100offer</a> 是国内第一流的人力资源服务网站，本文结尾有他们的<a href="#100offer">简介</a>，最近想换工作的朋友可以<a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">看一下</a>。</p>
<h2 id="一、型号"><a href="#一、型号" class="headerlink" title="一、型号"></a>一、型号</h2><p>树莓派是一个迷你电脑，集成在一块电路板。目前，最新的型号有两个。</p>
<p>（1）Raspberry Pi 3代 B 型 </p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061502.jpg" alt=""></p>
<p>（2）Raspberry Pi zero （含 zero w）</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061503.jpg" alt=""></p>
<p>虽然后者便宜，但是少了许多接口（比如只有一个 USB 口），CPU 和内存都比较低，配件也少，因此推荐购买第3代的 B 型。以下都针对这个型号，但大部分内容对 zero 也适用。</p>
<h2 id="二、配件"><a href="#二、配件" class="headerlink" title="二、配件"></a>二、配件</h2><p>树莓派本身只是一个主机。要运行起来，必须有配件。</p>
<p>（1）电源</p>
<p>Micro USB 接口的手机充电器，就可以充当电源，但输出必须是 5V 电压、至少 2A 电流。充电宝当电源也没问题。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061504.jpg" alt=""></p>
<p>（2）Micro SD 卡</p>
<p>树莓派不带硬盘，Micro SD 卡就是硬盘。最小容量8G，推荐使用16G和32G的卡。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061506.jpg" alt=""></p>
<p>（3）显示器</p>
<p>树莓派有 HDMI 输出，显示器必须有该接口。如果有 HDMI 转 VGA 的转接线，那么 VGA 显示器也可以。我用的是一个 7 寸的液晶监视器。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061507.jpg" alt=""></p>
<p>不过，显示器只在安装系统时需要，后面可以 <a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="external">SSH</a> 登录，就不需要了。</p>
<p>（4）无线键鼠</p>
<p>树莓派内置蓝牙，USB 或蓝牙的无线键鼠都可以用。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061508.jpg" alt=""></p>
<p>就像显示器一样，如果树莓派已经装好系统，而且只当作服务器，无线键鼠也可以不配。</p>
<h2 id="三、电子元件"><a href="#三、电子元件" class="headerlink" title="三、电子元件"></a>三、电子元件</h2><p>除了配件，下面的实验还需要一些电子元件。</p>
<p>（1）面包板（一块）</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061509.jpg" alt=""></p>
<p>（2）连接线（若干）</p>
<p>注意，连接线必须一端是公头，一端是母头。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061510.jpg" alt=""></p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061511.jpg" alt=""></p>
<p>另外，最好也备一些两端都是公头的连接线。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061512.jpg" alt=""></p>
<p>（3）LED 二极管（若干）</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061512.gif" alt=""></p>
<p>（4）270欧姆的电阻（若干）</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061513.jpg" alt=""></p>
<h2 id="四、安装系统"><a href="#四、安装系统" class="headerlink" title="四、安装系统"></a>四、安装系统</h2><p>如果商家已经装好系统，可以跳过这一步，否则需要自己安装操作系统。</p>
<p>官方提供的操作系统是 <a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="external">Raspbian</a>，这是 Debian 系统的定制版。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061514.png" alt=""></p>
<p>官方还提供一个安装器 <a href="https://www.raspberrypi.org/documentation/installation/noobs.md" target="_blank" rel="external">NOOBS</a>，建议通过它来安装 Raspbian，相对简单一点。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061515.png" alt=""></p>
<blockquote>
<ol>
<li><a href="https://www.raspberrypi.org/downloads/noobs/" target="_blank" rel="external">下载 NOOBS</a>。</li>
<li>格式化 Micro SD 卡为 FAT 格式（<a href="https://www.raspberrypi.org/documentation/installation/noobs.md" target="_blank" rel="external">操作指导</a>）。</li>
<li>解压<code>NOOBS.zip</code>到 Micro SD 卡根目录。</li>
<li>插入 Micro SD 卡到树莓派底部的卡槽，接通电源，启动系统。</li>
</ol>
</blockquote>
<p>正常情况下，按照屏幕上的提示，一路回车，就能装好系统。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061516.png" alt=""></p>
<h2 id="五、SSH-登录"><a href="#五、SSH-登录" class="headerlink" title="五、SSH 登录"></a>五、SSH 登录</h2><p>安装系统后，树莓派就可以上网了（Wifi 或者网线）。这时，你要看一下它的局域网 IP 地址，可以使用下面的命令。</p>
<blockquote>
<p>$ sudo ifconfig<br>    `</p>
</blockquote>
<pre><code>然后，更改系统设置，打开 SSH 登录（默认是禁止的）。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061521.png)

接着，从另一台电脑 SSH 登录树莓派。下面的命令是在局域网的另一台电脑上执行的。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ ssh pi@192.168.1.5
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，`192.168.1.5`是我的树莓派的地址，你要换成你的地址。树莓派的默认用户是`pi`。

树莓派会提示你输入密码。`pi`的默认密码是`raspberry`。正常情况下，这样就可以登录树莓派了。接着，就可以进行各种服务器[操作](http://www.ruanyifeng.com/blog/2014/03/server_setup.html)了，比如修改密码。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ passwd
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>后面的实验需要将用户加入`gpio`用户组。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ sudo adduser pi gpio
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面的代码表示将用户`pi`加入`gpio`用户组。

## 六、安装 Node

为了运行 Node 脚本，树莓派必须安装 Node，可以参考[这篇文章](http://thisdavej.com/beginners-guide-to-installing-node-js-on-a-raspberry-pi/#install-node)。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
$ sudo apt install nodejs
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>正常情况下，Node 8.x 版就已经安装成功了。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ node -v
v8.1.0
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>## 七、点亮 LED

树莓派提供了一组对外的 IO 接口，称为 GPIO（ 通用 IO 接口，General-purpose input/output）。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061518.png)

它的 40 个脚的定义如下图。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061519.png)

注意，左上角的第1针（3.3V）是一个方块，其他针脚都是圆的。将树莓派翻过来，背后可以看到 GPIO 有一个角是方的，通过这种方法就可以确认哪一个针眼是3.3V。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061516.jpg)

通过 GPIO ，树莓派可以与其他电子元件连接。下面根据 Jonathan Perkin 的[文章](http://www.perkin.org.uk/posts/a-nodejs-powered-8-bit-cpu-part-one.html)，使用树莓派连接 LED 二极管。

这里需要用到面包板。本质上，面包板就是几根导线，上面开了许多可以连到导线的孔。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061519.jpg)

`+`极和`-`极是两根垂直的导线，标着`1`、`5`、`10`这些数字的行，每一行都是一根水平的导线。导线与导线之间互不连接，另外，面包板的左右两半也是互不连接的。

然后，按照下面的图，将树莓派、面包板、LED 灯、电阻连起来。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061520.jpg)

上图中，红色导线表示电流的正极，从 GPIO 的第1针（3.3V）连到面包板。黑色导线表示电流的负极，从 GPIO 第三排的第6针（ground）连到面包板。它们连到面包板的哪个眼并不重要，但必须保证能组成一个完整的电路（上图的箭头流向）。注意，LED 二极管也有正负极，长脚表示正极，短脚表示负极。电阻没有正负极。

连接完成后，打开树莓派的电源，LED 应该就会亮起来了。

## 八、LED 控制脚本

下面，我们使用 Node 脚本控制 LED。

首先，将正极的导线从1号针脚（3.3V）拔出，插到第6排的11号针脚（上图的 GPIO 17）。这个针脚的电流是脚本可以控制的。

然后，在树莓派上新建一个实验目录，并安装控制 GPIO 的 Node 模块[`rpio`](https://www.npmjs.com/package/rpio)。。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ mkdir led-demo &amp;&amp; cd led-demo
$ npm init -y
$ npm install -S rpio
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>接着，新建一个脚本[`led-on.js`](https://github.com/ruanyf/rpio-led-demo/blob/master/led-on.js)。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// led-on.js
var rpio = require(&apos;rpio&apos;);

// 打开 11 号针脚（GPIO17) 作为输出
rpio.open(11, rpio.OUTPUT);

// 指定 11 号针脚输出电流（HIGH）
rpio.write(11, rpio.HIGH);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>运行这个脚本，应该就会看到 LED 灯泡变亮了。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ node led-on.js
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>再新建一个`led-off.js`脚本，只要改一行（完整代码看[这里](https://github.com/ruanyf/rpio-led-demo/blob/master/led-off.js)）。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// led-off.js
//...

// 指定 11 号针脚停止输出电流（LOW）
rpio.write(11, rpio.LOW);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>运行这个脚本，LED 灯泡应该就会熄灭了。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ node led-off.js
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>有了这两个脚本，让 LED 闪烁就轻而易举了。新建一个[`led-blink.js`](https://github.com/ruanyf/rpio-led-demo/blob/master/led-blink.js)脚本。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// led-blink.js
var rpio = require(&apos;rpio&apos;);
rpio.open(11, rpio.OUTPUT);

function blink() {
  rpio.write(11, rpio.HIGH);
  setTimeout(function ledoff() {
    rpio.write(11, rpio.LOW);
  }, 50);
}

setInterval(blink, 100);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面的脚本让 LED 每秒闪烁10次。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ node led-blink.js
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>## 九、HTTP 服务器

通过控制 LED 可以做很多事，比如架设一个 HTTP 服务器，每当有人访问，LED 就闪烁一下。

首先，在刚才的目录里面装一个服务器模块。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ npm install -S server
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>然后，新建一个脚本`server.js`（完整代码看[这里](https://github.com/ruanyf/rpio-led-demo/blob/master/serve.js)）。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// server.js
var server = require(&apos;server&apos;);
var { get } = server.router;

// ...

server({ port: 8080 }, [
  get(&apos;/&apos; ,  ctx =&gt; {
    console.log(&apos;a request is coming...&apos;);
    blink();
  }),
]);

console.log(&apos;server starts on 8080 port&apos;);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>运行这个脚本。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ node server.js
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>然后，再打开一个命令行终端，访问8080端口，LED 就会闪一下。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ curl http://localhost:8080
</code></pre></blockquote>
<p>好了，今天的教程就到这里。接下来，你可以自己探索，做更多的尝试，比如写一个<a href="http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html" target="_blank" rel="external">测试用例脚本</a>，只要测试失败 LED 就会长亮，或者组装一个<a href="http://www.perkin.org.uk/posts/a-nodejs-powered-8-bit-cpu-part-two.html" target="_blank" rel="external">8位的加法器</a>。</p>
<p>（正文完）</p>
<p>================================</p>
<p><a id="100offer"></a></p>
<p>下面是推广时间，向大家推荐求职就业的好帮手—-<a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">100offer</a>。</p>
<p>如果你对现在工作不甚满意，希望寻找更好的职位，或者你已经有了很多工作邀请，感到无所适从，不知道哪个最合适自己，请尝试一下 <a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">100offer</a>。它能让你节省精力，从海量机会中找到最适合自己的那个。</p>
<p><a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external"><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017061520.png" alt=""></a></p>
<p><a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">100offer</a> 会对平台上的人才和企业进行严格筛选，让”最好的人才”和”最好的公司”相遇。点击<a href="https://cn.100offer.com/how-it-works/?utm_source=ruanyifeng&amp;utm_medium=display&amp;utm_campaign=ruanyifeng_20170615&amp;utm_content=find_new_job&amp;campaign_code=ruanyifeng" target="_blank" rel="external">这里</a>注册，提交资料并通过网站对您的评估和配对后，就可以收获 5～10 个满足你要求的好机会。</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-06-15T17:41:51+08:00">2017年6月15日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external"> 开发者手册</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://www.raspberrypi.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;树莓派&lt;/a&gt;（Raspberry Pi）是学习计算机知识、架设服务器的好工具，价格低廉，可玩性高。&lt;/p&gt;
&lt;p&gt;&lt;img src=
    
    </summary>
    
    
      <category term="Developer" scheme="https://matchless5233.github.io/tags/Developer/"/>
    
  </entry>
  
  <entry>
    <title>正态分布为什么常见？</title>
    <link href="https://matchless5233.github.io/2017/08/05/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83%E4%B8%BA%E4%BB%80%E4%B9%88%E5%B8%B8%E8%A7%81%EF%BC%9F/"/>
    <id>https://matchless5233.github.io/2017/08/05/正态分布为什么常见？/</id>
    <published>2017-08-05T02:40:00.000Z</published>
    <updated>2017-08-08T18:29:36.620Z</updated>
    
    <content type="html"><![CDATA[<p>统计学里面，正态分布（normal distribution）最常见。男女身高、寿命、血压、考试成绩、测量误差等等，都属于正态分布。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017073006.jpg" alt=""></p>
<p>以前，我认为中间状态是事物的常态，过高和过低都属于少数，这导致了正态分布的普遍性。最近，读到了 <a href="https://www.johndcook.com/blog/2015/03/09/why-isnt-everything-normally-distributed/" target="_blank" rel="external">John D. Cook</a> 的文章，才知道我的这种想法是错的。</p>
<p>正态分布为什么常见？真正原因是<a href="https://baike.baidu.com/item/%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86" target="_blank" rel="external">中心极限定理</a>（central limit theorem）。</p>
<blockquote>
<p>“多个独立统计量的和的平均值，符合正态分布。”</p>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017073002.gif" alt=""></p>
<p>上图中，随着统计量个数的增加，它们和的平均值越来越符合正态分布。</p>
<p><strong>根据中心极限定理，如果一个事物受到多种因素的影响，不管每个因素本身是什么分布，它们加总后，结果的平均值就是正态分布。</strong></p>
<p>举例来说，人的身高既有先天因素（基因），也有后天因素（营养）。每一种因素对身高的影响都是一个统计量，不管这些统计量本身是什么分布，它们和的平均值符合正态分布。（注意：男性身高和女性身高都是正态分布，但男女混合人群的身高<a href="https://www.johndcook.com/blog/2008/11/25/distribution-of-adult-heights/" target="_blank" rel="external">不是</a>正态分布。）</p>
<p>许多事物都受到多种因素的影响，这导致了正态分布的常见。</p>
<p>读到这里，读者可能马上就会提出一个问题：<strong>正态分布是对称的（高个子与矮个子的比例相同），但是很多真实世界的分布是不对称的。</strong></p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017073003.png" alt=""></p>
<p>比如，财富的分布就是不对称的，富人的有钱程度（可能比平均值高出上万倍），远远超出穷人的贫穷程度（平均值的十分之一就是赤贫了），即财富分布曲线有右侧的长尾。相比来说，身高的差异就小得多，最高和最矮的人与平均身高的差距，都在30%多。</p>
<p>这是为什么呢，财富明明也受到多种因素的影响，怎么就不是正态分布呢？</p>
<p>原来，正态分布只适合各种因素累加的情况，如果这些因素不是彼此独立的，会互相加强影响，那么就不是正态分布了。一个人是否能够挣大钱，由多种因素决定：</p>
<blockquote>
<ul>
<li>家庭</li>
<li>教育</li>
<li>运气</li>
<li>工作</li>
<li>…</li>
</ul>
</blockquote>
<p>这些因素都不是独立的，会彼此加强。如果出生在上层家庭，那么你就有更大的机会接受良好的教育、找到高薪的工作、遇见好机会，反之亦然。也就是说，这不是 1 + 1 = 2 的效果，而是 1 + 1 &gt; 2。</p>
<p>统计学家发现，如果各种因素对结果的影响不是相加，而是相乘，那么最终结果不是正态分布，而是<a href="https://baike.baidu.com/item/%E5%AF%B9%E6%95%B0%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83" target="_blank" rel="external">对数正态分布</a>（log normal distribution），即<code>x</code>的对数值<code>log(x)</code>满足正态分布。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017073004.gif" alt=""></p>
<p>这就是说，财富的对数值满足正态分布。如果平均财富是10,000元，那么1000元～10,000元之间的穷人（比平均值低一个数量级，宽度为9000）与10,000元~100,000元之间的富人（比平均值高一个数量级，宽度为90,000）人数一样多。因此，财富曲线左侧的范围比较窄，右侧出现长尾。</p>
<p><strong>参考链接</strong></p>
<ul>
<li><a href="https://www.johndcook.com/blog/2015/03/09/why-isnt-everything-normally-distributed/" target="_blank" rel="external">Why isn’t everything normally distributed?</a>, by John D. Cook</li>
<li><a href="https://www.johndcook.com/blog/2015/03/09/why-isnt-everything-normally-distributed/" target="_blank" rel="external">Achievement is not normal</a>, by John D. Cook</li>
</ul>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-08-02T07:33:58+08:00">2017年8月 2日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/algorithm/" target="_blank" rel="external"> 算法与数学</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;统计学里面，正态分布（normal distribution）最常见。男女身高、寿命、血压、考试成绩、测量误差等等，都属于正态分布。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg201707
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://matchless5233.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>窗口管理器 xmonad 教程</title>
    <link href="https://matchless5233.github.io/2017/08/03/%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E5%99%A8-xmonad-%E6%95%99%E7%A8%8B/"/>
    <id>https://matchless5233.github.io/2017/08/03/窗口管理器-xmonad-教程/</id>
    <published>2017-08-03T07:23:27.000Z</published>
    <updated>2017-08-08T18:29:36.620Z</updated>
    
    <content type="html"><![CDATA[<p>开发者最需要的，就是一个顺手的开发环境。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072701.jpg" alt=""></p>
<p>每个人的偏好不一样，我的开发环境是 Fish Shell + Xfce + xmonad + Vim，已经用了好多年，非常满意。</p>
<p>三个月前，我介绍了 <a href="http://www.ruanyifeng.com/blog/2017/05/fish_shell.html" target="_blank" rel="external">Fish Shell</a>，今天就来介绍 <a href="http://xmonad.org/" target="_blank" rel="external">xmonad</a>。根据本文，读者可以从零开始配置并使用 xmonad。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072702.png" alt=""></p>
<p>xmonad 的所有操作都通过键盘，只适合命令行的重度用户。如果你喜欢鼠标和图形界面，xmonad 不适合你。另外，它本身也不支持 Windows 系统。</p>
<h2 id="一、xmonad-是什么？"><a href="#一、xmonad-是什么？" class="headerlink" title="一、xmonad 是什么？"></a>一、xmonad 是什么？</h2><p>xmonad 是一种窗口管理器（window manager），用来管理软件窗口的位置和大小，会自动在桌面上平铺（tiling）窗口。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072703.jpg" alt=""></p>
<p>（图片说明：各种软件窗口）</p>
<p>注意，窗口管理器不是桌面环境（desktop environment）。后者是一套功能完善、集成各种工具的图形用户界面，比如 Gnome 和 KDE。桌面环境肯定包含了窗口管理器，但是（某些）窗口管理器可以不需要桌面环境，独立运行，xmonad 就是这种。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072704.png" alt=""></p>
<p>（图片说明：典型的桌面环境）</p>
<p>桌面环境通常很重，窗口管理器就很轻，不仅体积小，资源占用也少，用户可以配置各种细节，释放出系统的最大性能。</p>
<p>Linux 系统允许用户更换窗口管理器，有<a href="https://www.slant.co/topics/390/~best-window-managers-for-linux" target="_blank" rel="external">很多种</a>可以选择。xmonad 一直是最受欢迎的前三名，它使用 Haskell 语言编写，是世界上使用人数最多的 Haskell 软件。它的特点就是极简化，性能高。</p>
<h2 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h2><p>xmonad 的官网提供<a href="http://xmonad.org/download.html" target="_blank" rel="external">二进制包</a>，各个发行版都有。如果想自己编译，也可以下载源码。 </p>
<p>我的发行版是 Debian，安装就是一行命令。</p>
<blockquote>
<p>$ sudo apt-get install xmonad<br>    `</p>
</blockquote>
<pre><code>此外，还需要再安装两个小工具。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ sudo apt-get install xmobar dmenu
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>安装完成后，退出当前对话（session），选择 xmonad 会话重新登录。登录后，你会看到一个完全空白的桌面，什么也没有，这说明 xmonad 起作用了，因为这时还没有任何软件窗口。

## 三、常用命令

### 3.1 打开终端

第一步，你需要打开一个窗口。一般来说，总是打开命令行终端窗口。

xmonad 提供一个功能键，称为`mod`键（modifier 的缩写），所有操作都要使用这个键，默认为`alt`键，但是一般会把它改掉，比如改成`Windows`键，具体修改方法请看后文。

打开终端窗口，按下`mod + shift + return`（默认为`alt + shift + return`）。这会打开一个终端窗口，占据了所有桌面空间。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072705.png)

按下`mod + shift + return`，再打开一个终端窗口。它与第一个窗口水平地平分屏幕，每个窗口占据50%空间。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072706.png)

注意，第二个窗口占据桌面的左边，自动获得焦点，成为当前窗口。这个左边部分就称为&quot;主栏&quot;（master pane），右边部分称为&quot;副栏&quot;，前面打开的第一个窗口自动进入副栏。

再按一次`mod + shift + return`，打开第三个窗口。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072707.png)

这时，第三个窗口就会占据主栏，前两个窗口自动进入副栏。规则就是，新窗口总是独占主栏，旧窗口平分副栏。

### 3.2 布局模式

默认的布局模式是，主栏在左边，副栏在右边。

按下`mod + space`，布局模式改成主栏在上方，副栏在下方。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072708.png)

再按一次`mod + space`，就变成独占模式，当前窗口独占整个桌面，其他窗口不可见。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072705.png)

再按一次`mod + space`，就变回默认模式（主栏在左边，副栏在右边）。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072707.png)

按下`mod + ,`（mod + 逗号），一个副栏窗口会移动到主栏，即主栏变成有两个窗口，副栏变成只有一个窗口。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072709.png)

再按一次`mod + ,`（mod + 逗号），主栏变成三个窗口，副栏消失。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072710.png)

按下`mod + .`（mod + 句号），主栏减少一个窗口，副栏增加一个窗口。

### 3.3 移动焦点

新窗口总是自动获得焦点，变成当前窗口。按下`mod + j`，焦点顺时针移动到下一个窗口。

按下`mod + k`，焦点逆时针移动到上一个窗口。

如果当前窗口在副栏，按下`mod + return`，会与主栏窗口对调位置。

### 3.4 调整窗口顺序

按下`mod + shift + j`，按照顺时针的顺序，当前窗口与下一个窗口交换位置，即当前窗口前进到下一个位置。

按下`mod + shift + k`，按照逆时针顺序，当前窗口与上一个窗口交换位置。即当前窗口后退到上一个位置。

### 3.5 调整栏位大小

按下`mod + l`，主栏增加尺寸。

按下`mod + h`，副栏增加尺寸。

### 3.6 浮动窗口

正常情况下，xmonad 决定了窗口的位置和大小，但有时我们希望自己控制。xmonad 允许某个窗口浮动，脱离原有的布局。

按下`mod + 鼠标左键`拖动窗口，该窗口就会变成浮动窗口，可以放到屏幕的任何位置。

按下`mod + 鼠标右键`可以调整窗口大小。

按下`mod + t`，当前浮动窗口就会结束浮动，重新回到 xmonad 的布局。

### 3.7 关闭窗口

窗口可以自然关闭（比如终端窗口按`ctrl + d`），也可以让 xmonad 强行关闭它。

按下`mod + shift + c`，会关闭当前窗口，焦点移到下一个窗口。

### 3.8 退出 xmonad

按下`mod + shift + q`，将会立刻关闭所有窗口，退出 xmonad，用户需要重新登录。

## 四、工作区

xmonad 提供9个工作区，相当于提供9个桌面。按下`mod + 1`到`mod + 9`切换。 xmonad 启动后，默认处于1号工作区 。

如果要将一个窗口移到不同的工作区，先用`mod + j`或`mod + k`，将其变成焦点窗口，然后使用`mod + shift + 6`，就将其移到了6号工作区。

我的习惯是，1号工作区是终端，2号是浏览器，4号是虚拟机。

## 五、多显示器

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072712.jpg)

多显示器需要使用配置工具，我用的是 xrandr。其他工具还有 Xinerama 和 winView，另外 arandr 是 xrandr 的图形界面，也可以用。

下面的命令查看显示器的连接情况。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ xrandr -q
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>具体的配置教程可以看[这里](https://wiki.archlinux.org/index.php/xrandr)。

使用多显示器时，每个显示器会分配到一个工作区。默认情况下，1号工作区显示在主显示器，2号工作区显示在第二个显示器。如果要将4号工作区显示在当前显示器，那么按下`mod + 4`，4号工作就会与当前屏幕中的工作区互换位置。

`mod + w` 转移焦点到左显示器，`mod + e`转移焦点到右显示器。

`mod + shift + w`将当前窗口移到左显示器，`mod + shift + e`将当前窗口移到右显示器。

## 六、配置文件

xmonad 的配置文件是`～/.xmonad/xmonad.hs`。该文件需要用户自己新建，[这里](https://gist.github.com/ruanyf/65893d5d5916bb2ffefd8ea69ff869f7)是一个简单的范例，详细的解释可以看[官网](https://wiki.haskell.org/Xmonad/Config_archive/John_Goerzen)。

这个文件里面，`modMask`决定了`mod`到底是哪一个键。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>modMask = mod4Mask
</code></pre></blockquote>
<p>上面的这行就将<code>mod</code>键设为了<code>Windows</code>键。</p>
<p>修改配置文件以后，按下<code>mod + q</code>，新的配置就会生效。</p>
<h2 id="七、xmobar"><a href="#七、xmobar" class="headerlink" title="七、xmobar"></a>七、xmobar</h2><p>xmonad 的默认桌面，什么也没有，不太方便。xmobar 提供了一个状态栏，将常用信息显示在上面，比如 CPU 和内存的占用情况、天气、时间等等。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072713.jpg" alt=""></p>
<p>（图片说明：顶部状态栏就是 xmobar。）</p>
<p>它的配置文件是<code>~/.xmobarrc</code>（教程<a href="https://wiki.archlinux.org/index.php/Xmobar" target="_blank" rel="external">1</a>，<a href="http://projects.haskell.org/xmobar/" target="_blank" rel="external">2</a>，<a href="http://beginners-guide-to-xmonad.readthedocs.io/configure_xmobar.html" target="_blank" rel="external">3</a>）。<a href="https://gist.github.com/ruanyf/9d234b57ad1894d559abe57449fec65c" target="_blank" rel="external">这里</a>是一个最简单配置，<a href="https://gist.github.com/ruanyf/a640a98d41383387d3a6401796f54710" target="_blank" rel="external">这里</a>是我的笔记本电脑使用的配置。</p>
<h2 id="八、dmenu"><a href="#八、dmenu" class="headerlink" title="八、dmenu"></a>八、dmenu</h2><p>最后，dmenu 在桌面顶部提供了一个菜单条，可以快速启动应用程序。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072714.png" alt=""></p>
<p>（图片说明：dmenu 显示在屏幕顶部，输入<code>fire</code>会自动显示包含<code>fire</code>的启动命令。）</p>
<p>它从系统变量<code>$PATH</code>指定的路径中，寻找所有的应用程序，根据用户的键入，动态提示最符合的结果。</p>
<p>按下<code>mod + p</code>就会进入<code>dmenu</code>菜单栏，按下<code>ESC</code>键可以退出。方向键用来选择应用程序，<code>return</code>键用来启动。</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-07-29T08:25:25+08:00">2017年7月29日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external"> 开发者手册</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;开发者最需要的，就是一个顺手的开发环境。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017072701.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;每个人的偏好不一样，我的开发环境是 Fis
    
    </summary>
    
    
      <category term="Developer" scheme="https://matchless5233.github.io/tags/Developer/"/>
    
  </entry>
  
  <entry>
    <title>TCP 协议简介</title>
    <link href="https://matchless5233.github.io/2017/08/02/TCP-%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B/"/>
    <id>https://matchless5233.github.io/2017/08/02/TCP-协议简介/</id>
    <published>2017-08-02T11:20:18.000Z</published>
    <updated>2017-08-08T18:29:36.626Z</updated>
    
    <content type="html"><![CDATA[<p>TCP 是互联网核心协议之一，本文介绍它的基础知识。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060801.png" alt=""></p>
<h2 id="一、TCP-协议的作用"><a href="#一、TCP-协议的作用" class="headerlink" title="一、TCP 协议的作用"></a>一、TCP 协议的作用</h2><p>互联网由<a href="http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html" target="_blank" rel="external">一整套协议</a>构成。TCP 只是其中的一层，有着自己的分工。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060804.png" alt=""></p>
<p>（图片说明：TCP 是以太网协议和 IP 协议的上层协议，也是应用层协议的下层协议。）</p>
<p>最底层的以太网协议（Ethernet）规定了电子信号如何组成数据包（packet），解决了子网内部的点对点通信。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060802.jpg" alt=""></p>
<p>（图片说明：以太网协议解决了局域网的点对点通信。）</p>
<p>但是，以太网协议不能解决多个局域网如何互通，这由 IP 协议解决。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060803.png" alt=""></p>
<p>（图片说明：IP 协议可以连接多个局域网。）</p>
<p>IP 协议定义了一套自己的地址规则，称为 IP 地址。它实现了路由功能，允许某个局域网的 A 主机，向另一个局域网的 B 主机发送消息。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060805.jpg" alt=""></p>
<p>（图片说明：路由器就是基于 IP 协议。局域网之间要靠路由器连接。）</p>
<p>路由的原理很简单。市场上所有的路由器，背后都有很多网口，要接入多根网线。路由器内部有一张路由表，规定了 A 段 IP 地址走出口一，B 段地址走出口二，……通过这套”指路牌”，实现了数据包的转发。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060806.jpg" alt=""></p>
<p>（图片说明：本机的路由表注明了不同 IP 目的地的数据包，要发送到哪一个网口（interface）。）</p>
<p>IP 协议只是一个地址协议，并不保证数据包的完整。如果路由器丢包（比如缓存满了，新进来的数据包就会丢失），就需要发现丢了哪一个包，以及如何重新发送这个包。这就要依靠 TCP 协议。</p>
<p>简单说，TCP 协议的作用是，保证数据通信的完整性和可靠性，防止丢包。</p>
<h2 id="二、TCP-数据包的大小"><a href="#二、TCP-数据包的大小" class="headerlink" title="二、TCP 数据包的大小"></a>二、TCP 数据包的大小</h2><p>以太网数据包（packet）的大小是固定的，最初是1518字节，后来增加到1522字节。其中， 1500 字节是负载（payload），22字节是头信息（head）。</p>
<p>IP 数据包在以太网数据包的负载里面，它也有自己的头信息，最少需要20字节，所以 IP 数据包的负载最多为1480字节。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052913.png" alt=""></p>
<p>（图片说明：IP 数据包在以太网数据包里面，TCP 数据包在 IP 数据包里面。）</p>
<p>TCP 数据包在 IP 数据包的负载里面。它的头信息最少也需要20字节，因此 TCP 数据包的最大负载是 1480 - 20 = 1460 字节。由于 IP 和 TCP 协议往往有额外的头信息，所以 TCP 负载实际为1400字节左右。</p>
<p>因此，一条1500字节的信息需要两个 TCP 数据包。HTTP/2 协议的一大改进， 就是压缩 HTTP 协议的头信息，使得一个 HTTP 请求可以放在一个 TCP 数据包里面，而不是分成多个，这样就提高了速度。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg20170060810.png" alt=""></p>
<p>（图片说明：以太网数据包的负载是1500字节，TCP 数据包的负载在1400字节左右。）</p>
<h2 id="三、TCP-数据包的编号（SEQ）"><a href="#三、TCP-数据包的编号（SEQ）" class="headerlink" title="三、TCP 数据包的编号（SEQ）"></a>三、TCP 数据包的编号（SEQ）</h2><p>一个包1400字节，那么一次性发送大量数据，就必须分成多个包。比如，一个 10MB 的文件，需要发送7100多个包。</p>
<p>发送的时候，TCP 协议为每个包编号（sequence number，简称 SEQ），以便接收的一方按照顺序还原。万一发生丢包，也可以知道丢失的是哪一个包。</p>
<p>第一个包的编号是一个随机数。为了便于理解，这里就把它称为1号包。假定这个包的负载长度是100字节，那么可以推算出下一个包的编号应该是101。这就是说，每个数据包都可以得到两个编号：自身的编号，以及下一个包的编号。接收方由此知道，应该按照什么顺序将它们还原成原始文件。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060807.png" alt=""></p>
<p>（图片说明：当前包的编号是45943，下一个数据包的编号是46183，由此可知，这个包的负载是240字节。）</p>
<h2 id="四、TCP-数据包的组装"><a href="#四、TCP-数据包的组装" class="headerlink" title="四、TCP 数据包的组装"></a>四、TCP 数据包的组装</h2><p>收到 TCP 数据包以后，组装还原是操作系统完成的。应用程序不会直接处理 TCP 数据包。</p>
<p>对于应用程序来说，不用关心数据通信的细节。除非线路异常，收到的总是完整的数据。应用程序需要的数据放在 TCP 数据包里面，有自己的格式（比如 HTTP 协议）。</p>
<p>TCP 并没有提供任何机制，表示原始文件的大小，这由应用层的协议来规定。比如，HTTP 协议就有一个头信息<code>Content-Length</code>，表示信息体的大小。对于操作系统来说，就是持续地接收 TCP 数据包，将它们按照顺序组装好，一个包都不少。</p>
<p>操作系统不会去处理 TCP 数据包里面的数据。一旦组装好 TCP 数据包，就把它们转交给应用程序。TCP 数据包里面有一个端口（port）参数，就是用来指定转交给监听该端口的应用程序。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060808.jpg" alt=""></p>
<p>（图片说明：系统根据 TCP 数据包里面的端口，将组装好的数据转交给相应的应用程序。上图中，21端口是 FTP 服务器，25端口是 SMTP 服务，80端口是 Web 服务器。）</p>
<p>应用程序收到组装好的原始数据，以浏览器为例，就会根据 HTTP 协议的<code>Content-Length</code>字段正确读出一段段的数据。这也意味着，一次 TCP 通信可以包括多个 HTTP 通信。</p>
<h2 id="五、慢启动和-ACK"><a href="#五、慢启动和-ACK" class="headerlink" title="五、慢启动和 ACK"></a>五、慢启动和 ACK</h2><p>服务器发送数据包，当然越快越好，最好一次性全发出去。但是，发得太快，就有可能丢包。带宽小、路由器过热、缓存溢出等许多因素都会导致丢包。线路不好的话，发得越快，丢得越多。</p>
<p>最理想的状态是，在线路允许的情况下，达到最高速率。但是我们怎么知道，对方线路的理想速率是多少呢？答案就是慢慢试。</p>
<p>TCP 协议为了做到效率与可靠性的统一，设计了一个慢启动（slow start）机制。开始的时候，发送得较慢，然后根据丢包的情况，调整速率：如果不丢包，就加快发送速度；如果丢包，就降低发送速度。</p>
<p>Linux 内核里面<a href="http://elixir.free-electrons.com/linux/v4.5/source/include/net/tcp.h#L220" target="_blank" rel="external">设定</a>了（常量<code>TCP_INIT_CWND</code>），刚开始通信的时候，发送方一次性发送10个数据包，即”发送窗口”的大小为10。然后停下来，等待接收方的确认，再继续发送。</p>
<p>默认情况下，接收方每收到<a href="https://serverfault.com/questions/348666/when-the-tcp-engine-decides-to-send-an-ack" target="_blank" rel="external">两个</a> TCP 数据包，就要<a href="https://stackoverflow.com/a/3604882/1194049" target="_blank" rel="external">发送</a>一个确认消息。”确认”的英语是 acknowledgement，所以这个确认消息就简称 ACK。</p>
<p>ACK 携带两个信息。</p>
<blockquote>
<ul>
<li>期待要收到下一个数据包的编号</li>
<li>接收方的接收窗口的剩余容量</li>
</ul>
</blockquote>
<p>发送方有了这两个信息，再加上自己已经发出的数据包的最新编号，就会推测出接收方大概的接收速度，从而降低或增加发送速率。这被称为”发送窗口”，这个窗口的大小是可变的。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060809.png" alt=""></p>
<p>（图片说明：每个 ACK 都带有下一个数据包的编号，以及接收窗口的剩余容量。双方都会发送 ACK。）</p>
<p>注意，由于 TCP 通信是双向的，所以双方都需要发送 ACK。两方的窗口大小，很可能是不一样的。而且 ACK 只是很简单的几个字段，通常与数据合并在一个数据包里面发送。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060812.jpg" alt=""></p>
<p>（图片说明：上图一共4次通信。第一次通信，A 主机发给B 主机的数据包编号是1，长度是100字节，因此第二次通信 B 主机的 ACK 编号是 1 + 100 = 101，第三次通信 A 主机的数据包编号也是 101。同理，第二次通信 B 主机发给 A 主机的数据包编号是1，长度是200字节，因此第三次通信 A 主机的 ACK 是201，第四次通信 B 主机的数据包编号也是201。）</p>
<p>即使对于带宽很大、线路很好的连接，TCP 也总是从10个数据包开始慢慢试，过了一段时间以后，才达到最高的传输速率。这就是 TCP 的慢启动。</p>
<h2 id="六、数据包的遗失处理"><a href="#六、数据包的遗失处理" class="headerlink" title="六、数据包的遗失处理"></a>六、数据包的遗失处理</h2><p>TCP 协议可以保证数据通信的完整性，这是怎么做到的？</p>
<p>前面说过，每一个数据包都带有下一个数据包的编号。如果下一个数据包没有收到，那么 ACK 的编号就不会发生变化。</p>
<p>举例来说，现在收到了4号包，但是没有收到5号包。ACK 就会记录，期待收到5号包。过了一段时间，5号包收到了，那么下一轮 ACK 会更新编号。如果5号包还是没收到，但是收到了6号包或7号包，那么 ACK 里面的编号不会变化，总是显示5号包。这会导致大量重复内容的 ACK。</p>
<p>如果发送方发现收到<a href="https://stackoverflow.com/questions/4233851/why-does-tcp-wait-for-three-duplicate-ack-before-fast-retransmit" target="_blank" rel="external">三个</a>连续的重复 ACK，或者超时了还没有收到任何 ACK，就会确认丢包，即5号包遗失了，从而再次发送这个包。通过这种机制，TCP 保证了不会有数据包丢失。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060811.png" alt=""></p>
<p>（图片说明：Host B 没有收到100号数据包，会连续发出相同的 ACK，触发 Host A 重发100号数据包。）</p>
<h2 id="七、参考链接"><a href="#七、参考链接" class="headerlink" title="七、参考链接"></a>七、参考链接</h2><ul>
<li><a href="https://www.destroyallsoftware.com/compendium/network-protocols" target="_blank" rel="external">Network protocols for programmers who know at least one programming language</a></li>
</ul>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-06-08T16:26:18+08:00">2017年6月 8日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/computer/" target="_blank" rel="external"> 理解计算机</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;TCP 是互联网核心协议之一，本文介绍它的基础知识。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017060801.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;一、TCP-协议的作
    
    </summary>
    
    
      <category term="Computer" scheme="https://matchless5233.github.io/tags/Computer/"/>
    
  </entry>
  
  <entry>
    <title>WebSocket 教程</title>
    <link href="https://matchless5233.github.io/2017/07/31/WebSocket-%E6%95%99%E7%A8%8B/"/>
    <id>https://matchless5233.github.io/2017/07/31/WebSocket-教程/</id>
    <published>2017-07-30T16:49:26.000Z</published>
    <updated>2017-08-08T18:29:36.628Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://websocket.org/" target="_blank" rel="external">WebSocket</a> 是一种网络通信协议，很多高级功能都需要它。</p>
<p>本文介绍 WebSocket 协议的使用方法。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051501.png" alt=""></p>
<h2 id="一、为什么需要-WebSocket？"><a href="#一、为什么需要-WebSocket？" class="headerlink" title="一、为什么需要 WebSocket？"></a>一、为什么需要 WebSocket？</h2><p>初次接触 WebSocket 的人，都会问同样的问题：我们已经有了 HTTP 协议，为什么还需要另一个协议？它能带来什么好处？</p>
<p>答案很简单，因为 HTTP 协议有一个缺陷：通信只能由客户端发起。</p>
<p>举例来说，我们想了解今天的天气，只能是客户端向服务器发出请求，服务器返回查询结果。HTTP 协议做不到服务器主动向客户端推送信息。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051507.jpg" alt=""></p>
<p>这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。我们只能使用<a href="https://www.pubnub.com/blog/2014-12-01-http-long-polling/" target="_blank" rel="external">“轮询”</a>：每隔一段时候，就发出一个询问，了解服务器有没有新的信息。最典型的场景就是聊天室。</p>
<p>轮询的效率低，非常浪费资源（因为必须不停连接，或者 HTTP 连接始终打开）。因此，工程师们一直在思考，有没有更好的方法。WebSocket 就是这样发明的。</p>
<h2 id="二、简介"><a href="#二、简介" class="headerlink" title="二、简介"></a>二、简介</h2><p>WebSocket 协议在2008年诞生，2011年成为国际标准。所有浏览器都已经支持了。</p>
<p>它的最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于<a href="https://en.wikipedia.org/wiki/Push_technology" target="_blank" rel="external">服务器推送技术</a>的一种。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051502.png" alt=""></p>
<p>其他特点包括：</p>
<p>（1）建立在 TCP 协议之上，服务器端的实现比较容易。</p>
<p>（2）与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</p>
<p>（3）数据格式比较轻量，性能开销小，通信高效。</p>
<p>（4）可以发送文本，也可以发送二进制数据。</p>
<p>（5）没有同源限制，客户端可以与任意服务器通信。</p>
<p>（6）协议标识符是<code>ws</code>（如果加密，则为<code>wss</code>），服务器网址就是 URL。</p>
<blockquote>
<p>ws://example.com:80/some/path<br>    `</p>
</blockquote>
<pre><code>![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051503.jpg)

## 三、客户端的简单示例

WebSocket 的用法相当简单。

下面是一个网页脚本的例子（点击[这里](http://jsbin.com/muqamiqimu/edit?js,console)看运行结果），基本上一眼就能明白。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var ws = new WebSocket(&quot;wss://echo.websocket.org&quot;);

ws.onopen = function(evt) { 
  console.log(&quot;Connection open ...&quot;); 
  ws.send(&quot;Hello WebSockets!&quot;);
};

ws.onmessage = function(evt) {
  console.log( &quot;Received Message: &quot; + evt.data);
  ws.close();
};

ws.onclose = function(evt) {
  console.log(&quot;Connection closed.&quot;);
};      
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>## 四、客户端的 API

WebSocket 客户端的 API 如下。

### 4.1 WebSocket 构造函数

WebSocket 对象作为一个构造函数，用于新建 WebSocket 实例。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var ws = new WebSocket(&apos;ws://localhost:8080&apos;);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>执行上面语句之后，客户端就会与服务器进行连接。

实例对象的所有属性和方法清单，参见[这里](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)。

### 4.2 webSocket.readyState

`readyState`属性返回实例对象的当前状态，共有四种。

&gt; *   CONNECTING：值为0，表示正在连接。
</code></pre><blockquote>
<ul>
<li>OPEN：值为1，表示连接成功，可以通信了。</li>
<li>CLOSING：值为2，表示连接正在关闭。</li>
<li>CLOSED：值为3，表示连接已经关闭，或者打开连接失败。</li>
</ul>
</blockquote>
<pre><code>下面是一个示例。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>switch (ws.readyState) {
  case WebSocket.CONNECTING:
    // do something
    break;
  case WebSocket.OPEN:
    // do something
    break;
  case WebSocket.CLOSING:
    // do something
    break;
  case WebSocket.CLOSED:
    // do something
    break;
  default:
    // this never happens
    break;
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.3 webSocket.onopen

实例对象的`onopen`属性，用于指定连接成功后的回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>ws.onopen = function () {
  ws.send(&apos;Hello Server!&apos;);
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>如果要指定多个回调函数，可以使用`addEventListener`方法。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>ws.addEventListener(&apos;open&apos;, function (event) {
  ws.send(&apos;Hello Server!&apos;);
});
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.4 webSocket.onclose

实例对象的`onclose`属性，用于指定连接关闭后的回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>ws.onclose = function(event) {
  var code = event.code;
  var reason = event.reason;
  var wasClean = event.wasClean;
  // handle close event
};

ws.addEventListener(&quot;close&quot;, function(event) {
  var code = event.code;
  var reason = event.reason;
  var wasClean = event.wasClean;
  // handle close event
});
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.5 webSocket.onmessage

实例对象的`onmessage`属性，用于指定收到服务器数据后的回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>ws.onmessage = function(event) {
  var data = event.data;
  // 处理数据
};

ws.addEventListener(&quot;message&quot;, function(event) {
  var data = event.data;
  // 处理数据
});
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>注意，服务器数据可能是文本，也可能是二进制数据（`blob`对象或`Arraybuffer`对象）。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>ws.onmessage = function(event){
  if(typeof event.data === String) {
    console.log(&quot;Received data string&quot;);
  }

  if(event.data instanceof ArrayBuffer){
    var buffer = event.data;
    console.log(&quot;Received arraybuffer&quot;);
  }
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>除了动态判断收到的数据类型，也可以使用`binaryType`属性，显式指定收到的二进制数据类型。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// 收到的是 blob 数据
ws.binaryType = &quot;blob&quot;;
ws.onmessage = function(e) {
  console.log(e.data.size);
};

// 收到的是 ArrayBuffer 数据
ws.binaryType = &quot;arraybuffer&quot;;
ws.onmessage = function(e) {
  console.log(e.data.byteLength);
};
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.6 webSocket.send()

实例对象的`send()`方法用于向服务器发送数据。

发送文本的例子。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>ws.send(&apos;your message&apos;);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>发送 Blob 对象的例子。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var file = document
  .querySelector(&apos;input[type=&quot;file&quot;]&apos;)
  .files[0];
ws.send(file);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>发送 ArrayBuffer 对象的例子。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// Sending canvas ImageData as ArrayBuffer
var img = canvas_context.getImageData(0, 0, 400, 320);
var binary = new Uint8Array(img.data.length);
for (var i = 0; i &lt; img.data.length; i++) {
  binary[i] = img.data[i];
}
ws.send(binary.buffer);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.7 webSocket.bufferedAmount

实例对象的`bufferedAmount`属性，表示还有多少字节的二进制数据没有发送出去。它可以用来判断发送是否结束。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var data = new ArrayBuffer(10000000);
socket.send(data);

if (socket.bufferedAmount === 0) {
  // 发送完毕
} else {
  // 发送还没结束
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.8 webSocket.onerror

实例对象的`onerror`属性，用于指定报错时的回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>socket.onerror = function(event) {
  // handle error event
};

socket.addEventListener(&quot;error&quot;, function(event) {
  // handle error event
});
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>## 五、服务端的实现

WebSocket 服务器的实现，可以查看维基百科的[列表](https://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations)。

常用的 Node 实现有以下三种。
</code></pre><ul>
<li><a href="https://github.com/uWebSockets/uWebSockets" target="_blank" rel="external">µWebSockets</a></li>
<li><a href="http://socket.io/" target="_blank" rel="external">Socket.IO</a></li>
<li><p><a href="https://github.com/theturtle32/WebSocket-Node" target="_blank" rel="external">WebSocket-Node</a></p>
<p>具体的用法请查看它们的文档，这里不详细介绍了。</p>
<h2 id="六、WebSocketd"><a href="#六、WebSocketd" class="headerlink" title="六、WebSocketd"></a>六、WebSocketd</h2><p>下面，我要推荐一款非常特别的 WebSocket 服务器：<a href="http://websocketd.com" target="_blank" rel="external">Websocketd</a>。</p>
<p>它的最大特点，就是后台脚本不限语言，标准输入（stdin）就是 WebSocket 的输入，标准输出（stdout）就是 WebSocket 的输出。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051504.png" alt=""></p>
<p>举例来说，下面是一个 Bash 脚本<code>counter.sh</code>。</p>
<blockquote>
<pre>`
    #!/bin/bash

    echo 1
    sleep 1

    echo 2
    sleep 1

    echo 3
    `</pre>

</blockquote>
<p>命令行下运行这个脚本，会输出1、2、3，每个值之间间隔1秒。</p>
<blockquote>
<pre>`
    $ bash ./counter.sh
    1
    2
    3
    `</pre>

</blockquote>
<p>现在，启动<code>websocketd</code>，指定这个脚本作为服务。</p>
<blockquote>
<pre>`
    $ websocketd --port=8080 bash ./counter.sh
    `</pre>

</blockquote>
<p>上面的命令会启动一个 WebSocket 服务器，端口是<code>8080</code>。每当客户端连接这个服务器，就会执行<code>counter.sh</code>脚本，并将它的输出推送给客户端。</p>
<blockquote>
<pre>`
    var ws = new WebSocket('ws://localhost:8080/');

    ws.onmessage = function(event) {
      console.log(event.data);
    };
    `</pre>

</blockquote>
<p>上面是客户端的 JavaScript 代码，运行之后会在控制台依次输出1、2、3。</p>
<p>有了它，就可以很方便地将命令行的输出，发给浏览器。</p>
<blockquote>
<pre>`
    $ websocketd --port=8080 ls
    `</pre>

</blockquote>
<p>上面的命令会执行<code>ls</code>命令，从而将当前目录的内容，发给浏览器。使用这种方式实时监控服务器，简直是轻而易举（<a href="https://github.com/joewalnes/web-vmstats" target="_blank" rel="external">代码</a>）。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051505.jpg" alt=""></p>
<p>更多的用法可以参考<a href="https://github.com/joewalnes/websocketd/tree/master/examples/bash" target="_blank" rel="external">官方示例</a>。</p>
<blockquote>
<ul>
<li>Bash 脚本<a href="https://github.com/joewalnes/websocketd/blob/master/examples/bash/greeter.sh" target="_blank" rel="external">读取客户端输入</a>的例子</li>
<li>五行代码实现一个最简单的<a href="https://github.com/joewalnes/websocketd/blob/master/examples/bash/chat.sh" target="_blank" rel="external">聊天服务器</a></li>
</ul>
</blockquote>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051506.png" alt=""></p>
<p>websocketd 的实质，就是命令行的 WebSocket 代理。只要命令行可以执行的程序，都可以通过它与浏览器进行 WebSocket 通信。下面是一个 Node 实现的回声服务<a href="https://github.com/joewalnes/websocketd/blob/master/examples/nodejs/greeter.js" target="_blank" rel="external"><code>greeter.js</code></a>。</p>
<blockquote>
<pre>`
    process.stdin.setEncoding('utf8');

    process.stdin.on('readable', function() {
      var chunk = process.stdin.read();
      if (chunk !== null) {
        process.stdout.write('data: ' + chunk);
      }
    });
    `</pre>

</blockquote>
<p>启动这个脚本的命令如下。</p>
<blockquote>
<p><pre>`</pre></p>
<pre><code>$ websocketd --port=8080 node ./greeter.js
</code></pre></blockquote>
</li>
</ul>
<p>官方仓库还有其他<a href="https://github.com/joewalnes/websocketd/tree/master/examples" target="_blank" rel="external">各种语言</a>的例子。</p>
<h2 id="七、参考链接"><a href="#七、参考链接" class="headerlink" title="七、参考链接"></a>七、参考链接</h2><ul>
<li><a href="http://cjihrig.com/blog/how-to-use-websockets/" target="_blank" rel="external">How to Use WebSockets</a></li>
<li><a href="https://www.tutorialspoint.com/websockets/websockets_send_receive_messages.htm" target="_blank" rel="external">WebSockets - Send &amp; Receive Messages</a></li>
<li><a href="https://www.html5rocks.com/en/tutorials/websockets/basics/" target="_blank" rel="external">Introducing WebSockets: Bringing Sockets to the Web</a></li>
</ul>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-05-15T08:39:57+08:00">2017年5月15日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external"> 开发者手册</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://websocket.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WebSocket&lt;/a&gt; 是一种网络通信协议，很多高级功能都需要它。&lt;/p&gt;
&lt;p&gt;本文介绍 WebSocket 协议的使用方法。&lt;/p&gt;
&lt;p&gt;
    
    </summary>
    
    
      <category term="Developer" scheme="https://matchless5233.github.io/tags/Developer/"/>
    
  </entry>
  
  <entry>
    <title>HTML 自定义元素教程</title>
    <link href="https://matchless5233.github.io/2017/07/27/HTML-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0%E6%95%99%E7%A8%8B/"/>
    <id>https://matchless5233.github.io/2017/07/27/HTML-自定义元素教程/</id>
    <published>2017-07-27T15:54:03.000Z</published>
    <updated>2017-08-08T18:29:36.625Z</updated>
    
    <content type="html"><![CDATA[<p>组件是 Web 开发的方向，现在的热点是 JavaScript 组件，但是 HTML 组件未来可能更有希望。</p>
<p>本文就介绍 HTML 组件的基础知识：自定义元素（custom elements）。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062201.png" alt=""></p>
<p>文章结尾还有一则 <a href="#support">React 培训消息</a>（含 React Native），欢迎关注。</p>
<h2 id="一、浏览器处理"><a href="#一、浏览器处理" class="headerlink" title="一、浏览器处理"></a>一、浏览器处理</h2><p>我们一般都使用标准的 HTML 元素。</p>
<blockquote>
<p>&lt;p&gt;Hello World&lt;/p&gt;<br>    `</p>
</blockquote>
<pre><code>上面代码中，`&amp;lt;p&amp;gt;`就是标准的 HTML 元素。

如果使用非标准的自定义元素，会有什么结果？

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>&amp;lt;greeting&gt;Hello World&amp;lt;/greeting&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，`&amp;lt;greeting&amp;gt;`就是非标准元素，浏览器不认识它。这段代码的[运行结果](http://jsbin.com/rifozonomu/edit?html,output)是，浏览器照常显示`Hello World`，这说明浏览器并没有过滤这个元素。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062202.png)

现在，为自定义元素加上样式。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>greeting {
  display: block;
  font-size: 36px;
  color: red;
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>[运行结果](http://jsbin.com/dawenun/edit?html,css,output)如下。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062203.png)

接着，使用脚本操作这个元素。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>function customTag(tagName, fn){
  Array
    .from(document.getElementsByTagName(tagName))
    .forEach(fn);
}

function greetingHandler(element) {
  element.innerHTML = &apos;你好，世界&apos;;
}   

customTag(&apos;greeting&apos;, greetingHandler);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>[运行结果](http://jsbin.com/bisege/edit?html,js,output)如下。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062204.png)

这说明，浏览器对待自定义元素，就像对待标准元素一样，只是没有默认的样式和行为。这种处理方式是写入 [HTML5 标准](https://www.w3.org/TR/html5/infrastructure.html#extensibility-0)的。

&gt; &quot;User agents must treat elements and attributes that they do not understand as semantically neutral; leaving them in the DOM (for DOM processors), and styling them according to CSS (for CSS processors), but not inferring any meaning from them.&quot;

上面这段话的意思是，浏览器必须将自定义元素保留在 DOM 之中，但不会任何语义。除此之外，自定义元素与标准元素都一致。

事实上，浏览器提供了一个`HTMLUnknownElement`对象，所有自定义元素都是该对象的实例。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var tabs = document.createElement(&apos;tabs&apos;);

tabs instanceof HTMLUnknownElement // true
tabs instanceof HTMLElement // true
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，`tabs`是一个自定义元素，同时继承了`HTMLUnknownElement`和`HTMLElement`接口。

## 二、HTML import

有了自定义元素，就可以写出语义性非常好的 HTML 代码。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>&amp;lt;share-buttons&gt;
  &amp;lt;social-button type=&quot;weibo&quot;&gt;
    &amp;lt;a href=&quot;...&quot;&gt;微博&amp;lt;/a&gt;
  &amp;lt;/social-button&gt;
  &amp;lt;social-button type=&quot;weixin&quot;&gt;
    &amp;lt;a href=&quot;...&quot;&gt;微信&amp;lt;/a&gt;
  &amp;lt;/social-button&gt;
&amp;lt;/share-buttons&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面的代码，一眼就能看出语义。

如果将`&amp;lt;share-buttons&amp;gt;`元素的样式与脚本，封装在一个 HTML 文件`share-buttons.html`之中，这个元素就可以复用了。

使用的时候，先引入`share-buttons.html`。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>&amp;lt;link rel=&quot;import&quot; href=&quot;share-buttons.html&quot;&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>然后，就可以在网页中使用`&amp;lt;share-buttons&amp;gt;`了。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>&amp;lt;article&gt;
  &amp;lt;h1&gt;Title&amp;lt;/h1&gt;
  &amp;lt;share-buttons/&gt;
  ... ...
&amp;lt;/article&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>HTML imports 的更多用法可以参考教程（[1](https://www.html5rocks.com/en/tutorials/webcomponents/imports/)，[2](https://www.webcomponents.org/community/articles/introduction-to-html-imports)）。目前只有 Chrome 浏览器支持这个语法。

## 三、Custom Elements 标准

HTML5 标准规定了自定义元素是合法的。然后，W3C 就为自定义元素制定了一个单独的 [Custom Elements 标准](https://w3c.github.io/webcomponents/spec/custom/#custom-elements)。

它与其他三个标准放在一起---- HTML Imports，HTML Template、Shadow DOM----统称为 [Web Components](https://www.w3.org/standards/techs/components#w3c_all) 规范。目前，这个规范只有 Chrome 浏览器[支持](http://caniuse.com/#feat=custom-elements)。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062205.jpg)

Custom Elements 标准对自定义元素的名字做了[限制](https://developers.google.com/web/fundamentals/getting-started/primers/customelements)。

&gt; &quot;自定义元素的名字必须包含一个破折号（`-`）所以`&amp;lt;x-tags&amp;gt;`、`&amp;lt;my-element&amp;gt;`和`&amp;lt;my-awesome-app&amp;gt;`都是正确的名字，而`&amp;lt;tabs&amp;gt;`和`&amp;lt;foo_bar&amp;gt;`是不正确的。这样的限制使得 HTML 解析器可以分辨那些是标准元素，哪些是自定义元素。&quot;

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062206.jpg)

注意，一旦名字之中使用了破折号，自定义元素就不是`HTMLUnknownElement`的实例了。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var xTabs = document.createElement(&apos;x-tabs&apos;);

xTabs instanceof HTMLUnknownElement // false
xTabs instanceof HTMLElement // true
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>Custom Elements 标准规定了，自定义元素的定义可以使用 ES6 的[`class`语法](http://es6.ruanyifeng.com/#docs/class)。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// 定义一个 &amp;lt;my-element&gt;&amp;lt;/my-element&gt;
class MyElement extends HTMLElement {...}
window.customElements.define(&apos;my-element&apos;, MyElement);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，原生的`window.customElements`对象的`define`方法用来定义 Custom Element。该方法接受两个参数，第一个参数是自定义元素的名字，第二个参数是一个 ES6 的`class`。

这个`class`使用`get`和`set`方法定义 Custom Element 的某个属性。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>class MyElement extends HTMLElement {
  get content() {
    return this.getAttribute(&apos;content&apos;);
  }

  set content(val) {
    this.setAttribute(&apos;content&apos;, val);
  }
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>有了这个定义，网页之中就可以插入`&amp;lt;my-element&amp;gt;`了。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>&amp;lt;my-element content=&quot;Custom Element&quot;&gt;
  Hello
&amp;lt;/my-element&gt;
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>处理脚本如下。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>function customTag(tagName, fn){
  Array
    .from(document.getElementsByTagName(tagName))
    .forEach(fn);
}

function myElementHandler(element) {
  element.textConent = element.content;
}

customTag(&apos;my-element&apos;, myElementHandler);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>[运行结果](http://jsbin.com/filejeq/edit?html,js,output)如下。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062207.png)

ES6 Class 的一个好处是，可以很容易地写出继承类。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>class MyNewElement extends MyElement {
  // ...
}

customElements.define(&apos;my-new-element&apos;, MyNewElement);
</code></pre></blockquote>
<p>今天的教程就到这里，更多用法请参考谷歌的<a href="https://developers.google.com/web/fundamentals/getting-started/primers/customelements" target="_blank" rel="external">官方教程</a>。</p>
<h2 id="四、参考链接"><a href="#四、参考链接" class="headerlink" title="四、参考链接"></a>四、参考链接</h2><ul>
<li>John Negoita, <a href="https://code.tutsplus.com/tutorials/extending-the-html-by-creating-custom-tags--cms-28622" target="_blank" rel="external">Extending HTML by Creating Custom Tags</a></li>
<li>StackOverflow, <a href="https://stackoverflow.com/questions/9845011/are-custom-elements-valid-html5" target="_blank" rel="external">Are custom elements valid HTML5?</a></li>
<li>Eric Bidelman, <a href="https://developers.google.com/web/fundamentals/getting-started/primers/customelements" target="_blank" rel="external">Custom Elements v1: Reusable Web Components</a></li>
</ul>
<p>（正文完）</p>
<p>==============================</p>
<p><a id="support"></a></p>
<p>下面是一则培训消息。</p>
<p>自从我写了<a href="http://www.ruanyifeng.com/blog/2016/09/react-technology-stack.html" target="_blank" rel="external">《React 技术栈系列教程》</a>以后，有两种反馈：一种是觉得内容不够完整深入，希望有更详细的介绍，另一种是要求补上 React Native。对此我也没办法，精力有限，无法持续投入，只能推荐大家自己去看官方文档。</p>
<p>昨天，<a href="http://cn.udacity.com/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=ReactND01" target="_blank" rel="external">优达学城</a>的朋友联系我。他们与 <a href="https://reacttraining.com/" target="_blank" rel="external">React Training</a> 合作，正式推出了 <a href="https://cn.udacity.com/course/react-nanodegree--nd019/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=ReactND01" target="_blank" rel="external">React 培训课程</a>，希望我帮忙推广。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062101.png" alt=""></p>
<p>我听了很兴奋，因为 <a href="https://reacttraining.com/" target="_blank" rel="external">React Training</a> 是美国最专业的 React 培训机构，水平很高。几个讲课老师在 React 社区都非常有名，<a href="https://github.com/rackt/react-router" target="_blank" rel="external">React Router</a> 、<a href="https://unpkg.com/" target="_blank" rel="external">unpkg</a> 和 mustache.js 就是他们的作品。我相信，国内很难找到这样水平的老师和课程。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062102.png" alt=""></p>
<p>实际上，这件事在美国也很受关注，<a href="https://techcrunch.com/2017/06/20/udacitys-latest-nanodegree-will-teach-react/" target="_blank" rel="external">Techcrunch</a> 进行了报道。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062105.png" alt=""></p>
<p><a href="https://cn.udacity.com/course/react-nanodegree--nd019/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=ReactND01" target="_blank" rel="external">整个课程</a>与美国完全同步，一共持续4个月，分成三个环节。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062103.png" alt=""></p>
<p>课程内容涉及整个 React 技术栈，PC 端和手机端并重。学完之后，可以获得纳米学位的证书。</p>
<p>课程价格是 3399 元人民币。注意，该课程不是零基础的，要求学习者已经掌握 JavaScript 基本语法，所以有报名审核环节。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017062104.png" alt=""></p>
<p>想学 React/React Native 的同学可以考虑一下，点击<a href="https://cn.udacity.com/course/react-nanodegree--nd019/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=ReactND01" target="_blank" rel="external">这里</a>了解详情，报名到6月27日截止。</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-06-22T11:50:17+08:00">2017年6月22日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external"> 开发者手册</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;组件是 Web 开发的方向，现在的热点是 JavaScript 组件，但是 HTML 组件未来可能更有希望。&lt;/p&gt;
&lt;p&gt;本文就介绍 HTML 组件的基础知识：自定义元素（custom elements）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruan
    
    </summary>
    
    
      <category term="Developer" scheme="https://matchless5233.github.io/tags/Developer/"/>
    
  </entry>
  
  <entry>
    <title>Pull Request 的命令行管理</title>
    <link href="https://matchless5233.github.io/2017/07/26/Pull-Request-%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AE%A1%E7%90%86/"/>
    <id>https://matchless5233.github.io/2017/07/26/Pull-Request-的命令行管理/</id>
    <published>2017-07-26T07:32:43.000Z</published>
    <updated>2017-08-08T18:29:36.622Z</updated>
    
    <content type="html"><![CDATA[<p>Github 的一大特色就是 <a href="https://help.github.com/articles/about-pull-requests/" target="_blank" rel="external">Pull Request</a> 功能（简写为 PR）。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071801.png" alt=""></p>
<p>对于多人合作的项目，该功能简直必不可少。大部分人都是使用 Web 界面（如上图），本文介绍如何在命令行下处理 PR，翻译自 Cédric Beust 的<a href="http://beust.com/weblog/2010/09/15/a-quick-guide-to-pull-requests/" target="_blank" rel="external">文章</a>。</p>
<h2 id="一、Pull-Request-是什么？"><a href="#一、Pull-Request-是什么？" class="headerlink" title="一、Pull Request 是什么？"></a>一、Pull Request 是什么？</h2><p>Github 官方文档的<a href="https://help.github.com/articles/about-pull-requests/" target="_blank" rel="external">定义</a>如下。</p>
<blockquote>
<p>“Pull Request 是一种通知机制。你修改了他人的代码，将你的修改通知原来的作者，希望他合并你的修改，这就是 Pull Request。”</p>
</blockquote>
<p>Pull Request 本质上是一种软件的合作方式，是将涉及不同功能的代码，纳入主干的一种流程。这个过程中，还可以进行讨论、审核和修改代码。</p>
<h2 id="二、Pull-Request-的流程"><a href="#二、Pull-Request-的流程" class="headerlink" title="二、Pull Request 的流程"></a>二、Pull Request 的流程</h2><p>第一步，你需要把别人的代码，克隆到你自己的仓库，Github 的术语叫做 <a href="https://help.github.com/articles/fork-a-repo/" target="_blank" rel="external">fork</a>。</p>
<p>第二步，在你仓库的修改后的分支上，按下”New pull request”按钮。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071802.png" alt=""></p>
<p>这时，会进入一个新页面，有Base 和 Head 两个选项。Base 是你希望提交变更的目标，Head  是目前包含你的变更的那个分支或仓库。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071806.png" alt=""></p>
<p>第三步，填写说明，帮助别人理解你的提交，然后按下”create pull request”按钮即可。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071805.png" alt=""></p>
<p>PR 创建后，管理者就要决定是否接受该 PR。对于非代码变更（比如文档），单单使用 Web 界面就足够了。但是，对于代码变更，Web 界面可能不够用，需要命令行验证是否可以运行。</p>
<h2 id="三、git-am"><a href="#三、git-am" class="headerlink" title="三、git am"></a>三、git am</h2><p><code>git am</code>命令用于将一个 patch 文件，合并进入当前代码。</p>
<p>Github 对每个 PR 会自动生成一个 patch 文件。我们下载该文件，合并进本地代码，就可以在本地查看效果了。</p>
<blockquote>
<p>$ curl -L <a href="http://github.com/cbeust/testng/pull/17.patch" target="_blank" rel="external">http://github.com/cbeust/testng/pull/17.patch</a> | git am<br>    `</p>
</blockquote>
<pre><code>上面代码中，`curl`的`-L`参数表示，如果有302跳转，`curl`会自动跟进。后面网址里面的`/cbeust/testng`是目标仓库，`pull/17`表示该仓库收到的第17个 PR。

如果 PR 只包含一个 commit，那么也可以直接下载这个 commit 的 patch 文件。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ curl https://github.com/sclasen/jcommander/commit/bd770141029f49bcfa2e0d6e6e6282b531e69179.patch | git am
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，网址里面的`/sclasen/jcommander`是代码变更所在的那个仓库。

## 四、创建远程仓库

另一种方法是为 PR 创建一个远程分支，追踪提交者的仓库。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code># 创建远程仓库，指向 PR 提交者的仓库
$ git remote add nullin git://github.com/nullin/testng.git

# 从该远程仓库拉取代码
$ git fetch nullin

# 将该仓库的某个分支合并到当前分支
$ git merge kneath/error-page

# 推送到自己的仓库
$ git push origin master
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>## 五、cherry-pick

有时，PR 里面包含好几个 commit，但是你只想合并其中的一个或几个。

这时可以使用`cherry-pick`命令，挑出你感兴趣的 commit。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code># 建立远程分支，追踪提交者的仓库
$ git remote add nullin git://github.com/nullin/testng.git

# 从该远程仓库拉取代码
$ git fetch nullin

# 只将感兴趣的 commit 加入当前代码
$ git cherry-pick commit1
$ git cherry-pick commit2

# 推送到自己的仓库
$ git push origin master
</code></pre></blockquote>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-07-18T18:06:14+08:00">2017年7月18日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external"> 开发者手册</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Github 的一大特色就是 &lt;a href=&quot;https://help.github.com/articles/about-pull-requests/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Pull Request&lt;/a&gt; 功能（简写为 PR）
    
    </summary>
    
    
      <category term="Developer" scheme="https://matchless5233.github.io/tags/Developer/"/>
    
  </entry>
  
  <entry>
    <title>神经网络入门</title>
    <link href="https://matchless5233.github.io/2017/07/26/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%85%A5%E9%97%A8/"/>
    <id>https://matchless5233.github.io/2017/07/26/神经网络入门/</id>
    <published>2017-07-26T01:39:54.000Z</published>
    <updated>2017-08-08T18:29:36.625Z</updated>
    
    <content type="html"><![CDATA[<p>眼下最热门的技术，绝对是人工智能。</p>
<p>人工智能的底层模型是<a href="http://baike.baidu.com/item/%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C" target="_blank" rel="external">“神经网络”</a>（neural network）。许多复杂的应用（比如模式识别、自动控制）和高级模型（比如深度学习）都基于它。学习人工智能，一定是从它开始。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071201.jpg" alt=""></p>
<p>什么是神经网络呢？网上似乎<a href="https://www.zhihu.com/question/22553761" target="_blank" rel="external">缺乏</a>通俗的解释。</p>
<p>前两天，我读到 Michael Nielsen 的开源教材<a href="http://neuralnetworksanddeeplearning.com/index.html" target="_blank" rel="external">《神经网络与深度学习》</a>（Neural Networks and Deep Learning），意外发现里面的解释非常好懂。下面，我就按照这本书，介绍什么是神经网络。</p>
<p>这里我要感谢<a href="http://cn.udacity.com/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=FEND05" target="_blank" rel="external">优达学城</a>的赞助，本文<a href="#support">结尾</a>有他们的<a href="http://cn.udacity.com/course/front-end-web-developer-nanodegree--nd001-cn-advanced/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=FEND05" target="_blank" rel="external">《前端开发（进阶）》</a>课程的消息，欢迎关注。</p>
<h2 id="一、感知器"><a href="#一、感知器" class="headerlink" title="一、感知器"></a>一、感知器</h2><p>历史上，科学家一直希望模拟人的大脑，造出可以思考的机器。人为什么能够思考？科学家发现，原因在于人体的神经网络。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071212.png" alt=""></p>
<blockquote>
<ol>
<li>外部刺激通过神经末梢，转化为电信号，转导到神经细胞（又叫神经元）。</li>
<li>无数神经元构成神经中枢。</li>
<li>神经中枢综合各种信号，做出判断。</li>
<li>人体根据神经中枢的指令，对外部刺激做出反应。</li>
</ol>
</blockquote>
<p>既然思考的基础是神经元，如果能够”人造神经元”（artificial neuron），就能组成人工神经网络，模拟思考。上个世纪六十年代，提出了最早的”人造神经元”模型，叫做<a href="https://zh.wikipedia.org/wiki/%E6%84%9F%E7%9F%A5%E5%99%A8" target="_blank" rel="external">“感知器”</a>（perceptron），直到今天还在用。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071202.png" alt=""></p>
<p>上图的圆圈就代表一个感知器。它接受多个输入（x1，x2，x3…），产生一个输出（output），好比神经末梢感受各种外部环境的变化，最后产生电信号。</p>
<p>为了简化模型，我们约定每种输入只有两种可能：1 或 0。如果所有输入都是1，表示各种条件都成立，输出就是1；如果所有输入都是0，表示条件都不成立，输出就是0。</p>
<h2 id="二、感知器的例子"><a href="#二、感知器的例子" class="headerlink" title="二、感知器的例子"></a>二、感知器的例子</h2><p>下面来看一个例子。城里正在举办一年一度的游戏动漫展览，小明拿不定主意，周末要不要去参观。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071213.jpg" alt=""></p>
<p>他决定考虑三个因素。</p>
<blockquote>
<ol>
<li>天气：周末是否晴天？</li>
<li>同伴：能否找到人一起去？</li>
<li>价格：门票是否可承受？</li>
</ol>
</blockquote>
<p>这就构成一个感知器。上面三个因素就是外部输入，最后的决定就是感知器的输出。如果三个因素都是 Yes（使用<code>1</code>表示），输出就是1（去参观）；如果都是 No（使用<code>0</code>表示），输出就是0（不去参观）。</p>
<h2 id="三、权重和阈值"><a href="#三、权重和阈值" class="headerlink" title="三、权重和阈值"></a>三、权重和阈值</h2><p>看到这里，你肯定会问：如果某些因素成立，另一些因素不成立，输出是什么？比如，周末是好天气，门票也不贵，但是小明找不到同伴，他还要不要去参观呢？</p>
<p>现实中，各种因素很少具有同等重要性：某些因素是决定性因素，另一些因素是次要因素。因此，可以给这些因素指定权重（weight），代表它们不同的重要性。</p>
<blockquote>
<ul>
<li>天气：权重为8</li>
<li>同伴：权重为4</li>
<li>价格：权重为4</li>
</ul>
</blockquote>
<p>上面的权重表示，天气是决定性因素，同伴和价格都是次要因素。</p>
<p>如果三个因素都为1，它们乘以权重的总和就是 8 + 4 + 4 = 16。如果天气和价格因素为1，同伴因素为0，总和就变为 8 + 0 + 4 = 12。</p>
<p>这时，还需要指定一个阈值（threshold）。如果总和大于阈值，感知器输出1，否则输出0。假定阈值为8，那么 12 &gt; 8，小明决定去参观。阈值的高低代表了意愿的强烈，阈值越低就表示越想去，越高就越不想去。</p>
<p>上面的决策过程，使用数学表达如下。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071203.png" alt=""></p>
<p>上面公式中，<code>x</code>表示各种外部因素，<code>w</code>表示对应的权重。</p>
<h2 id="四、决策模型"><a href="#四、决策模型" class="headerlink" title="四、决策模型"></a>四、决策模型</h2><p>单个的感知器构成了一个简单的决策模型，已经可以拿来用了。真实世界中，实际的决策模型则要复杂得多，是由多个感知器组成的多层网络。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071205.png" alt=""></p>
<p>上图中，底层感知器接收外部输入，做出判断以后，再发出信号，作为上层感知器的输入，直至得到最后的结果。（注意：感知器的输出依然只有一个，但是可以发送给多个目标。）</p>
<p>这张图里，信号都是单向的，即下层感知器的输出总是上层感知器的输入。现实中，有可能发生循环传递，即 A 传给 B，B 传给 C，C 又传给 A，这称为<a href="https://zh.wikipedia.org/wiki/%E9%80%92%E5%BD%92%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C" target="_blank" rel="external">“递归神经网络”</a>（recurrent neural network），本文不涉及。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071211.png" alt=""></p>
<h2 id="五、矢量化"><a href="#五、矢量化" class="headerlink" title="五、矢量化"></a>五、矢量化</h2><p>为了方便后面的讨论，需要对上面的模型进行一些数学处理。</p>
<blockquote>
<ul>
<li>外部因素 <code>x1</code>、<code>x2</code>、<code>x3</code> 写成矢量 <code>&amp;lt;x1, x2, x3&amp;gt;</code>，简写为 <code>x</code></li>
<li>权重 <code>w1</code>、<code>w2</code>、<code>w3</code> 也写成矢量 <code>(w1, w2, w3)</code>，简写为 <code>w</code></li>
<li>定义运算 <code>w⋅x = ∑ wx</code>，即 <code>w</code> 和 <code>x</code> 的点运算，等于因素与权重的乘积之和</li>
<li>定义 <code>b</code> 等于负的阈值 <code>b = -threshold</code></li>
</ul>
</blockquote>
<p>感知器模型就变成了下面这样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071206.png" alt=""></p>
<h2 id="六、神经网络的运作过程"><a href="#六、神经网络的运作过程" class="headerlink" title="六、神经网络的运作过程"></a>六、神经网络的运作过程</h2><p>一个神经网络的搭建，需要满足三个条件。</p>
<blockquote>
<ul>
<li>输入和输出</li>
<li>权重（<code>w</code>）和阈值（<code>b</code>）</li>
<li>多层感知器的结构</li>
</ul>
</blockquote>
<p>也就是说，需要事先画出上面出现的那张图。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071205.png" alt=""></p>
<p>其中，最困难的部分就是确定权重（<code>w</code>）和阈值（<code>b</code>）。目前为止，这两个值都是主观给出的，但现实中很难估计它们的值，必需有一种方法，可以找出答案。</p>
<p>这种方法就是试错法。其他参数都不变，<code>w</code>（或<code>b</code>）的微小变动，记作<code>Δw</code>（或<code>Δb</code>），然后观察输出有什么变化。不断重复这个过程，直至得到对应最精确输出的那组<code>w</code>和<code>b</code>，就是我们要的值。这个过程称为模型的训练。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071207.png" alt=""></p>
<p>因此，神经网络的运作过程如下。</p>
<blockquote>
<ol>
<li>确定输入和输出</li>
<li>找到一种或多种算法，可以从输入得到输出</li>
<li>找到一组已知答案的数据集，用来训练模型，估算<code>w</code>和<code>b</code></li>
<li>一旦新的数据产生，输入模型，就可以得到结果，同时对<code>w</code>和<code>b</code>进行校正</li>
</ol>
</blockquote>
<p>可以看到，整个过程需要海量计算。所以，神经网络直到最近这几年才有实用价值，而且一般的 CPU 还不行，要使用专门为机器学习定制的 GPU 来计算。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071214.jpg" alt=""></p>
<h2 id="七、神经网络的例子"><a href="#七、神经网络的例子" class="headerlink" title="七、神经网络的例子"></a>七、神经网络的例子</h2><p>下面通过车牌自动识别的例子，来解释神经网络。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071215.jpg" alt=""></p>
<p>所谓”车牌自动识别”，就是高速公路的探头拍下车牌照片，计算机识别出照片里的数字。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071216.jpg" alt=""></p>
<p>这个例子里面，车牌照片就是输入，车牌号码就是输出，照片的清晰度可以设置权重（<code>w</code>）。然后，找到一种或多种<a href="http://www.ruanyifeng.com/blog/2011/07/principle_of_similar_image_search.html" target="_blank" rel="external">图像比对算法</a>，作为感知器。算法的得到结果是一个概率，比如75%的概率可以确定是数字<code>1</code>。这就需要设置一个阈值（<code>b</code>）（比如85%的可信度），低于这个门槛结果就无效。</p>
<p>一组已经识别好的车牌照片，作为训练集数据，输入模型。不断调整各种参数，直至找到正确率最高的参数组合。以后拿到新照片，就可以直接给出结果了。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071217.png" alt=""></p>
<h2 id="八、输出的连续性"><a href="#八、输出的连续性" class="headerlink" title="八、输出的连续性"></a>八、输出的连续性</h2><p>上面的模型有一个问题没有解决，按照假设，输出只有两种结果：0和1。但是，模型要求<code>w</code>或<code>b</code>的微小变化，会引发输出的变化。如果只输出<code>0</code>和<code>1</code>，未免也太不敏感了，无法保证训练的正确性，因此必须将”输出”改造成一个连续性函数。</p>
<p>这就需要进行一点简单的数学改造。</p>
<p>首先，将感知器的计算结果<code>wx + b</code>记为<code>z</code>。</p>
<blockquote>
<p>z = wx + b<br>    `</p>
</blockquote>
<pre><code>然后，计算下面的式子，将结果记为`σ(z)`。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>σ(z) = 1 / (1 + e^(-z))
</code></pre></blockquote>
<p>这是因为如果<code>z</code>趋向正无穷<code>z → +∞</code>（表示感知器强烈匹配），那么<code>σ(z) → 1</code>；如果<code>z</code>趋向负无穷<code>z → -∞</code>（表示感知器强烈不匹配），那么<code>σ(z) → 0</code>。也就是说，只要使用<code>σ(z)</code>当作输出结果，那么输出就会变成一个连续性函数。</p>
<p>原来的输出曲线是下面这样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071208.png" alt=""></p>
<p>现在变成了这样。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071209.png" alt=""></p>
<p>实际上，还可以证明<code>Δσ</code>满足下面的公式。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071210.png" alt=""></p>
<p>即<code>Δσ</code>和<code>Δw</code>和<code>Δb</code>之间是线性关系，变化率是偏导数。这就有利于精确推算出<code>w</code>和<code>b</code>的值了。</p>
<p>（正文完）</p>
<p>=============================================</p>
<p><a id="support"></a></p>
<p>下面是推广时间。</p>
<p>前端开发是<a href="http://cn.udacity.com/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=FEND05" target="_blank" rel="external">优达学城</a> Udacity 的纳米学位课程，分成两个级别：入门班和进阶班。今年下半年的<a href="http://cn.udacity.com/course/front-end-web-developer-nanodegree--nd001-cn-advanced/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=FEND05" target="_blank" rel="external">进阶班</a>，今天（7月13日）开始报名了，感兴趣的朋友不要错过！</p>
<p><a href="http://cn.udacity.com/course/front-end-web-developer-nanodegree--nd001-cn-advanced/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=FEND05" target="_blank" rel="external"><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071218.png" alt=""></a></p>
<p>本课程的重点是讲解如何应用 CSS 框架和 JavaScript 框架，做出高性能、高可用性的产品，并且使用测试工具保证代码质量。学习过程中，学员必须完成以下课堂练习。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071219.jpg" alt=""> <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071220.jpg" alt=""></p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071221.jpg" alt=""> <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017071222.jpg" alt=""></p>
<p>该课程是纳米学位课程，学员提交的每一行代码都有导师 code review，并且每周可以预约导师一对一辅导，对于提高个人能力极有帮助。</p>
<p>由于有真人 code review 环节，所以招生人数有限制，本期只有200个名额，目前已经预定了67个。<a href="http://cn.udacity.com/course/front-end-web-developer-nanodegree--nd001-cn-advanced/?utm_source=ruanyfarticle&amp;utm_medium=referral&amp;utm_campaign=FEND05" target="_blank" rel="external">点击这里</a>了解详情，报名从速哦。</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-07-13T06:33:10+08:00">2017年7月13日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/algorithm/" target="_blank" rel="external"> 算法与数学</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABPZJREFUeNqMyXtM1WUcx/FnNTdreAVCEEThyEFUrM2kwkpS05qVl8rugVpRUelaJdZaWWktdZKHssImgV04osgBCbwAa2Whm6GWoXHxcD1wHiI4t9/z/H68+wO3av1R3+217/b+CFStsHq/W2V1HW+wOmq8VkeN/E+dR/7SUSOtrmOnLc93jxA6LsTw71XLrUsHsNwHsdxl/09HGVb7QawOF1bn4ZF26QDDsmqNsH7be9psKcJs+fy/tRZjXvwM//678BVdT6BsMarhxZHeug+reW+TMC84+s0LDv4tH7PZgdXqwGrLx7yYP9KaHISOvUCwYh3+4iUMOiIJVmSMbBfy+4X581Zp/ryVfzi/FfPXd1AntxNwvkvg6zfQZ7Zg/rIV8/x7qB9fJlT/JPrcm4SOPctg3ihCR5dhNu2QQjfmSt2Yi27MRf+Uiz67Ef1TLv7Ct5CPZtMzJ4N2243Ij7Kwmjdhnt+EUZeFr/BmhvYkoBqewl8yD9/eCejGTVLoUzlSn8pBn8xBn85B/fAcf7z6PJ7rl9KdNBdP6nwuJc2jL+9+jJrXGNr1On9seZHgkQ0ESq8l4EzBOLKMod1XoE6slUKfXCd1wxp0Qxb6RBYDLzxGz8xb8aSm05u2kL4bF9N902I89yzHe986PEseoGP2YjqfvpNQeTr+4rmEKucz6LgS9f1jUuiy+VIfvxvz1GoGN99Hz8wFeGan0zl3Ae4lK3A/vJb2x7PpWPEI3bevoHfJKtypt9H1UgbDZx5E//goofJF+AtmoasWSaG2jZE6P5zg9hQ8Nyyie1Y6rQ+vpafMhdHXx7BpgjWMr7sbT5kL9/IHcUck0X3LtfgLVqAP3YAumoHeHYvaPkYKlRcudf54Bh5KpjP5Fi69tplgIMCQabK/rIxtO3bgqqxkmJHzdXbRknYbrWIcrWEJ9D8RjXaMRe2ciNo5QQr1QYRUjnC8C1Nxr1pD0O/HFwyQmZmJ3W4nLS0Nm83G+vXrsSwLgP6vS2kWo/lNjKN57gTMTyJRH0Si8iZKoXZdI5Ujkt55SXRtfBuAffv2sXLlSpxOJ9nZ2SQkJBAWFobX6wVgoPooLWI0v4hxuFeFY30ahdoVhcqLkEJ9GCV1QRTehZNxZ9wPQNGXX5KZmUlbWxspKSkIIUhPT0dZFibQvSaHJjGKxujxBHZGoT+ehPpwEsoRIYUqmCR1YTTBd2NoGxtOz4Y3CPoDrNuwnuhpU7lq/HgW3LGU5l4P2h+g55XNnBOjORM/jsH3ozGLYlAFMag90ahPI6VQxZOlKo5BOyfjey+GliljaL0uA7l9D2f37uess5KBoyfwbvmIJnsajVePouXeCIKFsZglsajiyX8pvEYKoySm33DGYTjj0OVxhEri6N84kfalY2i/NRb3AhvNN0+i9Y4wPC+H4yuMxTocjzoYj7F/ymVxI/+ryH5huKaeMVzxGK54QuXT8B+y4atIZqB8Nt6SVDzFqXi+mIO39Dp+PziHwdIZDJVOJ3gogZArHsM1BcMVj1E+BcMVe1GY38auNqqnYdQkEKpOJPBNEv7DdnyVdnwVdoYqki+bge9wCv6qFAJVyQS/mU6oJhHjSCJG9VSM6kRUfXi2GK6fJYy6+CyjNrHRqLP1GbWJ0qizSfV39Tap6qdLVW+Xqt4ujfokadRdVpvgNWpt54y6qc8MV44Sfw4An+t+Gj1AKyYAAAAASUVORK5CYII=" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;眼下最热门的技术，绝对是人工智能。&lt;/p&gt;
&lt;p&gt;人工智能的底层模型是&lt;a href=&quot;http://baike.baidu.com/item/%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C&quot; target=&quot;_
    
    </summary>
    
    
      <category term="Algorithm" scheme="https://matchless5233.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Server-Sent Events 教程</title>
    <link href="https://matchless5233.github.io/2017/07/19/Server-Sent-Events-%E6%95%99%E7%A8%8B/"/>
    <id>https://matchless5233.github.io/2017/07/19/Server-Sent-Events-教程/</id>
    <published>2017-07-19T09:40:06.000Z</published>
    <updated>2017-08-08T18:29:36.628Z</updated>
    
    <content type="html"><![CDATA[<p>服务器向浏览器推送信息，除了 <a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="external">WebSocket</a>，还有一种方法：Server-Sent Events（以下简称 SSE）。本文介绍它的用法。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052701.png" alt=""></p>
<h2 id="一、SSE-的本质"><a href="#一、SSE-的本质" class="headerlink" title="一、SSE 的本质"></a>一、SSE 的本质</h2><p>严格地说，<a href="http://www.ruanyifeng.com/blog/2016/08/http.html" target="_blank" rel="external">HTTP 协议</a>无法做到服务器主动推送信息。但是，有一种变通方法，就是服务器向客户端声明，接下来要发送的是流信息（streaming）。</p>
<p>也就是说，发送的不是一次性的数据包，而是一个数据流，会连续不断地发送过来。这时，客户端不会关闭连接，会一直等着服务器发过来的新的数据流，视频播放就是这样的例子。本质上，这种通信就是以流信息的方式，完成一次用时很长的下载。</p>
<p>SSE 就是利用这种机制，使用流信息向浏览器推送信息。它基于 HTTP 协议，目前除了 IE/Edge，其他浏览器都支持。</p>
<h2 id="二、SSE-的特点"><a href="#二、SSE-的特点" class="headerlink" title="二、SSE 的特点"></a>二、SSE 的特点</h2><p>SSE 与 WebSocket 作用相似，都是建立浏览器与服务器之间的通信渠道，然后服务器向浏览器推送信息。</p>
<p>总体来说，WebSocket 更强大和灵活。因为它是全双工通道，可以双向通信；SSE 是单向通道，只能服务器向浏览器发送，因为流信息本质上就是下载。如果浏览器向服务器发送信息，就变成了另一次 HTTP 请求。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017052702.jpg" alt=""></p>
<p>但是，SSE 也有自己的优点。</p>
<blockquote>
<ul>
<li>SSE 使用 HTTP 协议，现有的服务器软件都支持。WebSocket 是一个独立协议。</li>
<li>SSE 属于轻量级，使用简单；WebSocket 协议相对复杂。</li>
<li>SSE 默认支持断线重连，WebSocket 需要自己实现。</li>
<li>SSE 一般只用来传送文本，二进制数据需要编码后传送，WebSocket 默认支持传送二进制数据。</li>
<li>SSE 支持自定义发送的消息类型。</li>
</ul>
</blockquote>
<p>因此，两者各有特点，适合不同的场合。</p>
<h2 id="三、客户端-API"><a href="#三、客户端-API" class="headerlink" title="三、客户端 API"></a>三、客户端 API</h2><h3 id="3-1-EventSource-对象"><a href="#3-1-EventSource-对象" class="headerlink" title="3.1 EventSource 对象"></a>3.1 EventSource 对象</h3><p>SSE 的客户端 API 部署在<code>EventSource</code>对象上。下面的代码可以检测浏览器是否支持 SSE。</p>
<blockquote>
<p>if (‘EventSource’ in window) {<br>      // …<br>    }<br>    `</p>
</blockquote>
<pre><code>使用 SSE 时，浏览器首先生成一个`EventSource`实例，向服务器发起连接。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var source = new EventSource(url);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面的`url`可以与当前网址同域，也可以跨域。跨域时，可以指定第二个参数，打开`withCredentials`属性，表示是否一起发送 Cookie。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var source = new EventSource(url, { withCredentials: true });
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>`EventSource`实例的`readyState`属性，表明连接的当前状态。该属性只读，可以取以下值。

&gt; *   0：相当于常量`EventSource.CONNECTING`，表示连接还未建立，或者断线正在重连。
</code></pre><blockquote>
<ul>
<li>1：相当于常量<code>EventSource.OPEN</code>，表示连接已经建立，可以接受数据。</li>
<li>2：相当于常量<code>EventSource.CLOSED</code>，表示连接已断，且不会重连。</li>
</ul>
</blockquote>
<pre><code>### 3.2 基本用法

连接一旦建立，就会触发`open`事件，可以在`onopen`属性定义回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>source.onopen = function (event) {
  // ...
};

// 另一种写法
source.addEventListener(&apos;open&apos;, function (event) {
  // ...
}, false);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>客户端收到服务器发来的数据，就会触发`message`事件，可以在`onmessage`属性的回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>source.onmessage = function (event) {
  var data = event.data;
  // handle message
};

// 另一种写法
source.addEventListener(&apos;message&apos;, function (event) {
  var data = event.data;
  // handle message
}, false);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，事件对象的`data`属性就是服务器端传回的数据（文本格式）。

如果发生通信错误（比如连接中断），就会触发`error`事件，可以在`onerror`属性定义回调函数。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>source.onerror = function (event) {
  // handle error event
};

// 另一种写法
source.addEventListener(&apos;error&apos;, function (event) {
  // handle error event
}, false);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>`close`方法用于关闭 SSE 连接。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>source.close();
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 3.3 自定义事件

默认情况下，服务器发来的数据，总是触发浏览器`EventSource`实例的`message`事件。开发者还可以自定义 SSE 事件，这种情况下，发送回来的数据不会触发`message`事件。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>source.addEventListener(&apos;foo&apos;, function (event) {
  var data = event.data;
  // handle message
}, false);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，浏览器对 SSE 的`foo`事件进行监听。如何实现服务器发送`foo`事件，请看下文。

## 四、服务器实现

### 4.1 数据格式

服务器向浏览器发送的 SSE 数据，必须是 UTF-8 编码的文本，具有如下的 HTTP 头信息。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>Content-Type: text/event-stream
Cache-Control: no-cache
Connection: keep-alive
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面三行之中，第一行的`Content-Type`必须指定 MIME 类型为`event-steam`。

每一次发送的信息，由若干个`message`组成，每个`message`之间用`\n\n`分隔。每个`message`内部由若干行组成，每一行都是如下格式。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>[field]: value\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面的`field`可以取四个值。

&gt; *   data
</code></pre><blockquote>
<ul>
<li>event</li>
<li>id</li>
<li>retry</li>
</ul>
</blockquote>
<pre><code>此外，还可以有冒号开头的行，表示注释。通常，服务器每隔一段时间就会向浏览器发送一个注释，保持连接不中断。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>: This is a comment
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>下面是一个例子。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>: this is a test stream\n\n

data: some text\n\n

data: another message\n
data: with two lines \n\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.2 data 字段

数据内容用`data`字段表示。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>data:  message\n\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>如果数据很长，可以分成多行，最后一行用`\n\n`结尾，前面行都用`\n`结尾。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>data: begin message\n
data: continue message\n\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>下面是一个发送 JSON 数据的例子。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>data: {\n
data: &quot;foo&quot;: &quot;bar&quot;,\n
data: &quot;baz&quot;, 555\n
data: }\n\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.3 id 字段

数据标识符用`id`字段表示，相当于每一条数据的编号。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>id: msg1\n
data: message\n\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>浏览器用`lastEventId`属性读取这个值。一旦连接断线，浏览器会发送一个 HTTP 头，里面包含一个特殊的`Last-Event-ID`头信息，将这个值发送回来，用来帮助服务器端重建连接。因此，这个头信息可以被视为一种同步机制。

### 4.4 event 字段

`event`字段表示自定义的事件类型，默认是`message`事件。浏览器可以用`addEventListener()`监听该事件。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>event: foo\n
data: a foo event\n\n

data: an unnamed event\n\n

event: bar\n
data: a bar event\n\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面的代码创造了三条信息。第一条的名字是`foo`，触发浏览器的`foo`事件；第二条未取名，表示默认类型，触发浏览器的`message`事件；第三条是`bar`，触发浏览器的`bar`事件。

下面是另一个例子。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>event: userconnect
data: {&quot;username&quot;: &quot;bobby&quot;, &quot;time&quot;: &quot;02:33:48&quot;}

event: usermessage
data: {&quot;username&quot;: &quot;bobby&quot;, &quot;time&quot;: &quot;02:34:11&quot;, &quot;text&quot;: &quot;Hi everyone.&quot;}

event: userdisconnect
data: {&quot;username&quot;: &quot;bobby&quot;, &quot;time&quot;: &quot;02:34:23&quot;}

event: usermessage
data: {&quot;username&quot;: &quot;sean&quot;, &quot;time&quot;: &quot;02:34:36&quot;, &quot;text&quot;: &quot;Bye, bobby.&quot;}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>### 4.5 retry 字段

服务器可以用`retry`字段，指定浏览器重新发起连接的时间间隔。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>retry: 10000\n
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>两种情况会导致浏览器重新发起连接：一种是时间间隔到期，二是由于网络错误等原因，导致连接出错。

## 五、Node 服务器实例

SSE 要求服务器与浏览器保持连接。对于不同的服务器软件来说，所消耗的资源是不一样的。Apache 服务器，每个连接就是一个线程，如果要维持大量连接，势必要消耗大量资源。Node 则是所有连接都使用同一个线程，因此消耗的资源会小得多，但是这要求每个连接不能包含很耗时的操作，比如磁盘的 IO 读写。

下面是 Node 的 SSE 服务器[实例](http://cjihrig.com/blog/server-sent-events-in-node-js/)。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>var http = require(&quot;http&quot;);

http.createServer(function (req, res) {
  var fileName = &quot;.&quot; + req.url;

  if (fileName === &quot;./stream&quot;) {
    res.writeHead(200, {
      &quot;Content-Type&quot;:&quot;text/event-stream&quot;,
      &quot;Cache-Control&quot;:&quot;no-cache&quot;,
      &quot;Connection&quot;:&quot;keep-alive&quot;,
      &quot;Access-Control-Allow-Origin&quot;: &apos;*&apos;,
    });
    res.write(&quot;retry: 10000\n&quot;);
    res.write(&quot;event: connecttime\n&quot;);
    res.write(&quot;data: &quot; + (new Date()) + &quot;\n\n&quot;);
    res.write(&quot;data: &quot; + (new Date()) + &quot;\n\n&quot;);

    interval = setInterval(function () {
      res.write(&quot;data: &quot; + (new Date()) + &quot;\n\n&quot;);
    }, 1000);

    req.connection.addListener(&quot;close&quot;, function () {
      clearInterval(interval);
    }, false);
  }
}).listen(8844, &quot;127.0.0.1&quot;);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>请将上面的代码保存为`server.js`，然后执行下面的命令。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>$ node server.js
</code></pre></blockquote>
<p>上面的命令会在本机的<code>8844</code>端口，打开一个 HTTP 服务。</p>
<p>然后，打开这个<a href="http://jsbin.com/vuziboduwa/edit?html,output" target="_blank" rel="external">网页</a>，查看客户端代码并运行。</p>
<h2 id="六、参考链接"><a href="#六、参考链接" class="headerlink" title="六、参考链接"></a>六、参考链接</h2><ul>
<li>Colin Ihrig, <a href="http://jspro.com/apis/implementing-push-technology-using-server-sent-events/" target="_blank" rel="external">Implementing Push Technology Using Server-Sent Events</a></li>
<li>Colin Ihrig，<a href="http://cjihrig.com/blog/the-server-side-of-server-sent-events/" target="_blank" rel="external">The Server Side of Server-Sent Events</a></li>
<li>Eric Bidelman, <a href="http://www.html5rocks.com/en/tutorials/eventsource/basics/" target="_blank" rel="external">Stream Updates with Server-Sent Events</a></li>
<li>MDN，<a href="https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events" target="_blank" rel="external">Using server-sent events</a></li>
<li>Segment.io, <a href="https://segment.io/blog/2014-04-03-server-sent-events-the-simplest-realtime-browser-spec/" target="_blank" rel="external">Server-Sent Events: The simplest realtime browser spec</a></li>
</ul>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-05-27T15:49:29+08:00">2017年5月27日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external"> 开发者手册</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;服务器向浏览器推送信息，除了 &lt;a href=&quot;http://www.ruanyifeng.com/blog/2017/05/websocket.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WebSocket&lt;/a&gt;，还有一种方法：Server
    
    </summary>
    
    
      <category term="Developer" scheme="https://matchless5233.github.io/tags/Developer/"/>
    
  </entry>
  
  <entry>
    <title>XOR 加密简介</title>
    <link href="https://matchless5233.github.io/2017/06/15/XOR-%E5%8A%A0%E5%AF%86%E7%AE%80%E4%BB%8B/"/>
    <id>https://matchless5233.github.io/2017/06/15/XOR-加密简介/</id>
    <published>2017-06-15T03:11:02.000Z</published>
    <updated>2017-08-08T18:29:36.628Z</updated>
    
    <content type="html"><![CDATA[<p>本文介绍一种简单高效、非常安全的加密方法：XOR 加密。</p>
<p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017053107.jpg" alt=""></p>
<h2 id="一、-XOR-运算"><a href="#一、-XOR-运算" class="headerlink" title="一、 XOR 运算"></a>一、 XOR 运算</h2><p>逻辑运算之中，除了 <a href="https://en.wikipedia.org/wiki/Logical_conjunction" target="_blank" rel="external"><code>AND</code></a> 和 <a href="https://en.wikipedia.org/wiki/Logical_disjunction" target="_blank" rel="external"><code>OR</code></a>，还有一种 <a href="https://zh.wikipedia.org/wiki/%E9%80%BB%E8%BE%91%E5%BC%82%E6%88%96" target="_blank" rel="external"><code>XOR</code></a> 运算，中文称为”异或运算”。</p>
<p>它的定义是：两个值相同时，返回<code>false</code>，否则返回<code>true</code>。也就是说，<code>XOR</code>可以用来判断两个值是否不同。</p>
<blockquote>
<p>true XOR true // false<br>    false XOR false // false<br>    true XOR false // true<br>    true XOR false // true<br>    `</p>
</blockquote>
<pre><code>![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017053102.jpg)

JavaScript 语言的二进制运算，有一个专门的 XOR 运算符，写作`^`。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>1 ^ 1 // 0
0 ^ 0 // 0
1 ^ 0 // 1
0 ^ 1 // 1
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，如果两个二进制位相同，就返回`0`，表示`false`；否则返回`1`，表示`true`。

## 二、 XOR 的应用

XOR 运算有一个很奇妙的特点：如果对一个值连续做两次 XOR，会返回这个值本身。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// 第一次 XOR
1010 ^ 1111 // 0101

// 第二次 XOR
0101 ^ 1111 // 1010
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，原始值是`1010`，再任意选择一个值（上例是`1111`），做两次 XOR，最后总是会得到原始值`1010`。这在数学上是很容易证明的。

## 三、加密应用

XOR 的这个特点，使得它可以用于信息的加密。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>message XOR key // cipherText
cipherText XOR key // message
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，原始信息是`message`，密钥是`key`，第一次 XOR 会得到加密文本`cipherText`。对方拿到以后，再用`key`做一次 XOR 运算，就会还原得到`message`。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017053106.gif)

## 四、完美保密性

二战期间，各国为了电报加密，对密码学进行了大量的研究和实践，其中就包括 XOR 加密。

![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017053103.jpg)

战后，美国数学家香农（Claude Shannon）将他的[研究成果](https://en.wikipedia.org/wiki/One-time_pad#Perfect_secrecy)公开发表，证明了只要满足两个条件，XOR 加密是无法破解的。

&gt; *   `key`的长度大于等于`message`
</code></pre><blockquote>
<ul>
<li><code>key</code>必须是一次性的，且每次都要随机产生</li>
</ul>
</blockquote>
<pre><code>理由很简单，如果每次的`key`都是随机的，那么产生的`CipherText`具有所有可能的值，而且是均匀分布，无法从`CipherText`看出`message`的任何特征。也就是说，它具有最大的&quot;信息熵&quot;，因此完全不可能破解。这被称为 XOR 的[&quot;完美保密性&quot;](https://zh.wikipedia.org/wiki/%E5%AE%8C%E5%96%84%E4%BF%9D%E5%AF%86%E6%80%A7)（perfect secrecy）。

满足上面两个条件的`key`，叫做 [one-time pad](https://en.wikipedia.org/wiki/One-time_pad)（缩写为OTP），意思是&quot;一次性密码本&quot;，因为以前这样的`key`都是印刷成密码本，每次使用的时候，必须从其中挑选`key`。

## 五、实例：哈希加密

下面的例子使用 XOR，对用户的登陆密码进行加密。实际运行效果看[这里](https://www.webpackbin.com/bins/-KlJDPHf6IgYNNm9IcK6)。

[![](http://www.ruanyifeng.com/blogimg/asset/2017/bg2017053105.png)](https://www.webpackbin.com/bins/-KlJDPHf6IgYNNm9IcK6)

第一步，用户设置登陆密码的时候，算出这个密码的哈希，这里使用的是 MD5 算法，也可以采用其他哈希算法。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>const message = md5(password);
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>第二步，生成一个随机的 key。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>// 生成一个随机整数，范围是 [min, max]
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// 生成一个随机的十六进制的值，在 0 ～ f 之间 
function getHex() {
  let n = 0;
  for (let i = 4; i &gt; 0; i--) {
    n = (getRandomInt(0, 1) &lt;&lt; (i - 1)) + n;
  }
  return n.toString(16);
}

// 生成一个32位的十六进制值，用作一次性 Key
function getOTP() {
  const arr = [];
  for (let i = 0; i &lt; 32; i++) {
    arr.push(getHex());
  }
  return arr.join(&apos;&apos;);
}
`&lt;/pre&gt;
</code></pre></blockquote>
<pre><code>上面代码中，生成的`key`是32位的十六进制值，对应 MD5 产生的128位的二进制哈希。

第三步，进行 XOR 运算，求出加密后的`message`。

&gt; &lt;pre&gt;`
</code></pre><blockquote>
<pre><code>function getXOR(message, key) {
  const arr = [];
  for (let i = 0; i &lt; 32; i++) {
    const  m = parseInt(message.substr(i, 1), 16);
    const k = parseInt(key.substr(i, 1), 16);
    arr.push((m ^ k).toString(16));
  }
  return arr.join(&apos;&apos;);
}
</code></pre></blockquote>
<p>使用这种方法保存用户的登陆密码，即使加密文本泄露，只要一次性的密钥（<code>key</code>）没有泄露，对方也无法破解。</p>
<p>（完）</p>
<pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;
</code></pre><h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2017-05-31T14:29:17+08:00">2017年5月31日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="external"> 档案</a>  »<a href="http://www.ruanyifeng.com/blog/computer/" target="_blank" rel="external"> 理解计算机</a></li>
<li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank" rel="external">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank" rel="external">《未来世界的幸存者》</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" alt=""> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank" rel="external"><img src="data:image/png;base64,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" alt=""> weibo</a></li>
<li>Feed订阅： <a href="/feed.html"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" alt=""></a>        <pre><code>&lt;div style=&quot;color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文介绍一种简单高效、非常安全的加密方法：XOR 加密。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.ruanyifeng.com/blogimg/asset/2017/bg2017053107.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;一、-XOR-运
    
    </summary>
    
    
      <category term="Computer" scheme="https://matchless5233.github.io/tags/Computer/"/>
    
  </entry>
  
</feed>
